webpackJsonp([12],{"5ofq":function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,"\n.page-container[data-v-2337892e]{\n    padding-top: 15px;\n}\n.tab-row[data-v-2337892e]{\n    border-bottom: 1px solid #d1dbe5;\n}\n.tab[data-v-2337892e] {\n    bottom: -1px;\n    position: relative;\n    padding: 0 30px;\n    border: 1px solid #d1dbe5;\n    border-bottom-color: #fff;\n    border-radius: 4px 4px 0 0;\n    display: inline-block;\n    line-height: 40px;\n    font-size: 18px;\n    color: #616d80;\n}\n.page-content[data-v-2337892e]{\n    border: 1px solid #d1dbe5;\n    border-top: 0;\n}\n.back-btn[data-v-2337892e]{\n    margin: 28px 0 28px 42px;\n    color: #616d80;\n}\n",""])},"6QCu":function(t,e,a){"use strict";var n={name:"PageContainer",props:{title:{required:!0,type:String},showBackBtn:{type:Boolean,default:!1}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-container"},[a("header",{staticClass:"tab-row"},[a("span",{staticClass:"tab"},[t._v(t._s(t.title))])]),t._v(" "),a("div",{staticClass:"page-content"},[t.showBackBtn?a("el-button",{staticClass:"back-btn",attrs:{icon:"arrow-left",type:"plain"},on:{click:function(e){t.$router.back()}}},[t._v("返回")]):t._e(),t._v(" "),t._t("default")],2)])},staticRenderFns:[]};var s=a("/Xao")(n,r,!1,function(t){a("vlUk")},"data-v-2337892e",null);e.a=s.exports},QX3Q:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("4YfN"),r=a.n(n),s=a("6QCu"),i={name:"lists",props:["tableEles","totalPage","data","httpUrl","pageUrl","name"],data:function(){return{eles:this.tableEles,total:this.totalPage,currentUrl:this.url}},created:function(){console.log(this.data)},methods:{handleCurrentChange:function(t){this.$emit("pagination-click",t)},getAdverseStatus:function(t){return!!t&&(!!t.trim&&("正常"===t.trim()?"停用":"失效"===t.trim()?"启用":""))},editStatus:function(t,e){var a="正常"===e[t].status?2:1,n=e[t].id;this.$http.get(this.httpUrl+"?status="+a+"&id="+n).then(function(n){e[t].status=1===a?"正常":"失效",console.log(e[t]),alert("修改成功")}).catch(function(t){return alert(t)})},editOrg:function(t,e){return this.$router.push({path:this.pageUrl,query:{id:e[t].id}}),function(t){t()}},routeTo:function(t,e){this.$router.push({path:this.pageUrl,query:{id:e[t].id}})}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.data,border:""}},[t._l(t.eles,function(e){return e.ifLink?[a("el-table-column",{attrs:{prop:"control",label:e.name,width:"200"},scopedSlots:t._u([{key:"default",fn:function(n){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){e.preventDefault(),t.routeTo(n.$index,t.data)}}},[t._v("\n                        "+t._s(t.data[n.$index][e.value])+"\n                    ")])]}}])})]:[a("el-table-column",{key:e.value,attrs:{prop:e.value,label:e.name,width:"200"}})]}),t._v(" "),a("el-table-column",{attrs:{prop:"control",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.editStatus(e.$index,t.data)}}},[t._v("\n                    "+t._s(t.getAdverseStatus(t.data[e.$index].status))+"\n                ")]),t._v(" "),"正常"===t.data[e.$index].status?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.editOrg(e.$index,t.data)}}},[t._v("\n                    修改\n                ")]):t._e()]}}])})],2),t._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-pagination",{staticClass:"pager",attrs:{"page-size":10,layout:"total, prev, pager, next",total:t.totalPage},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var o=a("/Xao")(i,l,!1,function(t){a("bb+p")},"data-v-6b524f22",null).exports,u=a("9rMa"),c=a("7XyB"),d={data:function(){return{httpUrl:"/user/updateState.do",pageUrl:"/pt/AccountInfo",userForm:{status:"",provinceId:"",cityId:"",countryId:"",streetId:"",pageNum:1,username:"",type:1,category:"",startTime:"",endTime:"",orgName:""},time:[],tableEles:[{value:"orgName",name:"机构名称",ifLink:!1},{value:"category",name:"账号类型",ifLink:!1},{value:"username",name:"用户账号",ifLink:!0},{value:"name",name:"姓名",ifLink:!1},{value:"addUserName",name:"创建人",ifLink:!1},{value:"addTime",name:"创建时间",ifLink:!1},{value:"status",name:"账号状态",ifLink:!1}],totalPage:1,data:[],tableData:[]}},components:{lists:o,PageContainer:s.a},created:function(){this.getLists(1)},methods:{pageChange:function(t){this.userForm.pageNum=t,this.getLists()},reSet:function(){this.userForm={status:"",provinceId:"",cityId:"",countryId:"",streetId:"",pageNum:1,username:"",type:1,category:"",startTime:"",endTime:"",orgName:""},this.time=[]},getLists:function(){var t=this;this.userForm.username.trim&&(this.userForm.username=this.userForm.username.trim()),this.userForm.startTime="",this.userForm.endTime="",this.time.length>0&&this.time[0]&&this.time[1]&&(this.userForm.startTime=this.time[0].getTime(),this.userForm.endTime=this.time[1].getTime()),this.$http.post("http://ums.17link.cc/user/getUserByParam.do",this.userForm).then(function(e){var a=e.data.data;t.totalPage=a.totalNum,t.tableData=a.users,t.tableData&&t.tableData.length&&t.tableData.length>0?t.tableData.forEach(function(t){t.status=1===t.status?"正常":"失效",t.category=1===t.category?"主账号":"子账号",t.addTime=Object(c.format)(t.addTime,"YYYY-MM-DD HH:mm:SS")}):t.tableData=[]}).catch(function(t){return alert(t)})},addMain:function(){this.isOrg?this.$router.push({path:"/inst/addChildAccount"}):alert("您暂时没有该权限")}},computed:r()({},Object(u.b)(["isOrg"]))},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("page-container",{attrs:{title:"账号管理"}},[a("el-form",{staticClass:"info-container",attrs:{model:t.userForm,"label-width":"100px",inline:""}},[a("el-form-item",{attrs:{label:"用户账号"}},[a("el-input",{model:{value:t.userForm.username,callback:function(e){t.$set(t.userForm,"username",e)},expression:"userForm.username"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"账号类型"}},[a("el-select",{attrs:{placeholder:"请选择机构状态"},model:{value:t.userForm.category,callback:function(e){t.$set(t.userForm,"category",e)},expression:"userForm.category"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"主账号",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"子账号",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"账号状态"}},[a("el-select",{attrs:{placeholder:"请选择机构状态"},model:{value:t.userForm.status,callback:function(e){t.$set(t.userForm,"status",e)},expression:"userForm.status"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"失效",value:"2"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{attrs:{type:"datetimerange",placeholder:"选择时间范围"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:" "}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.getLists}},[t._v("筛选")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-close"},on:{click:t.reSet}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addMain}},[t._v("添加子账号")])],1)],1)],1),t._v(" "),a("lists",{staticClass:"list",attrs:{tableEles:t.tableEles,totalPage:t.totalPage,data:t.tableData,httpUrl:t.httpUrl,pageUrl:t.pageUrl,name:"orgName"},on:{"pagination-click":t.pageChange}})],1)},staticRenderFns:[]},m=a("/Xao")(d,p,!1,null,null,null);e.default=m.exports},"bb+p":function(t,e,a){var n=a("v1JM");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("8bSs")("fc4d3d84",n,!0)},v1JM:function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,"\n.pager[data-v-6b524f22] {\n  padding: 15px 0;\n}\n",""])},vlUk:function(t,e,a){var n=a("5ofq");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("8bSs")("4da8289e",n,!0)}});