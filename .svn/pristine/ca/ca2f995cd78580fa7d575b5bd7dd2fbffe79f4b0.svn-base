webpackJsonp([36],{"3DAX":function(t,e,a){(t.exports=a("BkJT")(!1)).push([t.i,"\n.org-m .search .head {\n  background-color: #fff;\n}\n.org-m .search .head h5 {\n    padding: 0px 38px 0px 38px;\n    height: 42px;\n    line-height: 42px;\n    font-size: 22px;\n    color: #616d80;\n    border: 1px solid #CAD3DF;\n    border-bottom: none;\n    text-align: center;\n    background-color: #FBFBFB;\n    border-radius: 5px 5px 0 0;\n}\n.org-m .search .search-table {\n  padding-top: 10px;\n  margin-top: -1px;\n}\n.org-m .search .search-table .button {\n    margin-left: 31px;\n    margin-bottom: 10px;\n}\n.org-m .list {\n  margin-top: 32px;\n}\n.org-m .download {\n  width: 100%;\n  color: #fff;\n}\n",""])},clXU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("hRKE"),n=a.n(o),i=a("rppN"),r=a("qn+5"),s=a("fEa0"),l=a("M8s3"),c=a("TIrm"),d={data:function(){return{userForm:{pageNum:1,pageSize:10,condition:{orgId:"",orgName:"",catePid:"",cateId:"",isOnShelves:""},serviceArea:{cityId:"",cityName:"",provinceId:"",provinceName:"",streetId:"",streetName:"",zoneId:"",zoneName:""}},userInfo:window._dataInfo,type:window._dataInfo.type,tableData:[],cateList:[],showOrg:!1,totalNum:"",showDialog:!1,dialogTitle:"",flag:!0,info:{catePid:"",catePname:"",cateId:"",cateName:"",serviceDuration:"",price:"",isOnShelves:"",orgId:window._dataInfo.orgId,orgName:window._dataInfo.orgName},id:""}},components:{cityArea:r.a,limitArea:s.a,orgChoose:l.a,controlPr:c.default,PageContainer:i.a},computed:{cates:function(){var t=[],e=this.userForm.condition.catePid,a=this.cateList.filter(function(t){return t.catePid==e}),o=this.cateList;if(a.length>0)for(var n=0;n<o.length;n++)if(o[n].catePid==e&&o[n].cate)return t=o[n].cate,t;return t||[]}},created:function(){this.getCates(),this.getLists(function(){this.userForm.pageSize=1e3})},methods:{sift:function(){this.userForm.pageSize=10,this.getLists()},getCates:function(){var t=this;this.$http.get("http://mp.17link.cc/manage/category/query").then(function(e){var a=e.data.data;t.cateList=a.list}).catch(function(t){return alert(t)})},changeStatus:function(t,e){var a=e[t],o=1===a.isOnShelves?2:1;this.$http.post("http://mp.17link.cc/manage/product/switch",{id:e[t].id,isOnShelves:o,operatorId:this.userInfo.id,operatorName:this.userInfo.name}).then(function(n){alert("操作成功"),a.isOnShelves=o,a.status=1===e[t].isOnShelves?"是":"否"}).catch(function(t){return console.log})},getAdverseStatus:function(t){return t.trim?"是"===t.trim()?"下架":"上架":"否"},selectChange:function(t){var e=this.userForm.serviceArea;e.provinceId=t.provinceId,e.provinceName=t.provinceName,e.cityId=t.cityId,e.cityName=t.cityName,e.zoneId=t.areaId,e.zoneName=t.areaName,e.streetId=t.streetId,e.streetName=t.streetName},setOrgInfo:function(t){t&&(this.userForm.condition.orgId=t.id,this.userForm.condition.orgName=t.name),this.showOrg=!1},pageChange:function(t){this.userForm.pageNum=t,this.userForm.pageSize=10,this.getLists()},reSet:function(){this.userForm={pageNum:1,pageSize:1e3,condition:{orgId:"",catePid:"",cateId:"",isOnShelves:""},serviceArea:{cityId:"",cityName:"",provinceId:"",provinceName:"",streetId:"",streetName:"",zoneId:"",zoneName:""}}},getLists:function(t){var e=this;this.$http.post("http://mp.17link.cc/manage/product/query",this.userForm).then(function(a){var o=a.data.data;e.totalNum=o.count,e.tableData=o.list,e.tableData.forEach(function(t){return t.status=1===t.isOnShelves?" 是":"否"}),t&&t()}).catch(function(t){return console.log})},chooseOrg:function(){this.showOrg=!0},linkTo:function(t,e){this.$router.push({path:"/integratedMana/CommodityInfo",query:{id:e[t].id}})},edit:function(t){for(var e in this.info)this.info[e]=t[e];this.info.orgId=window._dataInfo.orgId,this.info.orgName=window._dataInfo.orgName,this.id=t.id,this.dialogTitle="修改商品",this.flag=!0,this.showDialog=!0},addPr:function(){this.info.orgId=window._dataInfo.orgId,this.info.orgName=window._dataInfo.orgName,this.dialogTitle="创建商品",this.flag=!1,this.showDialog=!0},dialogClick:function(){var t=this;if(arguments.length>0){var e="";e=(arguments.length<=1?void 0:arguments[1])?"http://mp.17link.cc/manage/product/update":"http://mp.17link.cc/manage/product/add",this.$http.post(e,arguments.length<=0?void 0:arguments[0]).then(function(e){alert("操作成功"),t.userForm.pageSize=10,t.getLists()}).catch(function(t){return alert(t)})}this.showDialog=!1},getQuery:function(t){var e="";for(var a in t)"object"===n()(t[a])?e+=this.getQuery(t[a]):e+=a+"="+t[a]+"&";return e},getParams:function(t){return t.slice(0,-1)}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("pageContainer",{staticClass:"org-m",attrs:{title:"商品管理"}},[a("div",{staticClass:"search"},[a("div",{staticClass:"search-table"},[a("el-row",[1===t.type?a("el-col",{attrs:{span:6}},[a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:t.addPr}},[t._v("上架新商品")])],1):t._e()],1),t._v(" "),a("el-form",{staticClass:"demo-ruleForm form",attrs:{model:t.userForm,"label-width":"120px"}},[a("el-row",{staticClass:"area"},[0===t.type?a("cityArea",{ref:"area",attrs:{title:"服务区域",curNum:"0"},on:{"select-change":t.selectChange}}):t._e(),t._v(" "),2===t.type?a("limitArea",{on:{"select-change":t.selectChange}}):t._e()],1),t._v(" "),a("el-row",[1!==t.type?a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"服务机构"}},[t._v("\n                            "+t._s(t.userForm.condition.orgName)+"\n                            "),a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:t.chooseOrg}},[t._v("选择服务机构")])],1)],1):t._e()],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"服务品类(一级)"}},[a("el-select",{attrs:{placeholder:"请选择一级品类"},model:{value:t.userForm.condition.catePid,callback:function(e){t.$set(t.userForm.condition,"catePid",e)},expression:"userForm.condition.catePid"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.cateList,function(t){return a("el-option",{key:t.catePid,attrs:{label:t.cateName,value:t.catePid}})})],2)],1)],1),t._v(" "),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"服务品类(二级)"}},[a("el-select",{attrs:{placeholder:"请选择二级品类"},model:{value:t.userForm.condition.cateId,callback:function(e){t.$set(t.userForm.condition,"cateId",e)},expression:"userForm.condition.cateId"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.cates,function(t){return a("el-option",{key:t.cateId,attrs:{label:t.cateName,value:t.cateId}})})],2)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"是否上架"}},[a("el-select",{attrs:{placeholder:"请选择机构状态"},model:{value:t.userForm.condition.isOnShelves,callback:function(e){t.$set(t.userForm.condition,"isOnShelves",e)},expression:"userForm.condition.isOnShelves"}},[a("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),a("el-option",{attrs:{label:"是",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"否",value:"2"}})],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.sift}},[t._v("筛选")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.reSet}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary"}},[a("a",{staticClass:"download",attrs:{download:"test",href:"http://mp.17link.cc/manage/product/export?"+t.getParams(t.getQuery(this.userForm))}},[t._v("导出")])])],1)],1)],1)],1)]),t._v(" "),a("div",{staticClass:"list"},[a("el-table",{staticClass:"list",attrs:{data:t.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"control",label:"商品编号",width:"249"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.linkTo(e.$index,t.tableData)}}},[t._v("\n                        "+t._s(t.tableData[e.$index].id)+"\n                    ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"养老机构",width:"249"}}),t._v(" "),a("el-table-column",{attrs:{prop:"catePname",label:"服务大类",width:"249"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cateName",label:"服务品类",width:"249"}}),t._v(" "),a("el-table-column",{attrs:{prop:"serviceDuration",label:"单次服务时间/分钟",width:"249"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格/次",width:"249"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"是否上架",width:"249"}}),t._v(" "),1===t.type?a("el-table-column",{attrs:{prop:"control",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.changeStatus(e.$index,t.tableData)}}},[t._v("\n                        "+t._s(t.getAdverseStatus(t.tableData[e.$index].status))+"\n                    ")]),t._v(" "),1===t.tableData[e.$index].isOnShelves?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),t.edit(t.tableData[e.$index])}}},[t._v("\n                        修改\n                    ")]):t._e()]}}])}):t._e()],1)],1),t._v(" "),t.showOrg?a("org-choose",{on:{"pop-click":t.setOrgInfo}}):t._e(),t._v(" "),t.showDialog?a("control-pr",{attrs:{cateList:t.cateList,info:t.info,id:t.id,dialogTitle:t.dialogTitle,flag:t.flag},on:{"pop-click":t.dialogClick}}):t._e()],1)},staticRenderFns:[]};var p=a("/Xao")(d,u,!1,function(t){a("q9Yp")},null,null);e.default=p.exports},q9Yp:function(t,e,a){var o=a("3DAX");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("8bSs")("0e5fa11f",o,!0)}});