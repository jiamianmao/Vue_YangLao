webpackJsonp([17],{"7djw":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("hRKE"),o=r.n(a),i=r("cUn4"),s=r.n(i),n=r("D7x1"),l=r("7XyB"),c=r("rppN"),m={data:function(){return{httpUrl:"/org/updateOrgState.do",pageUrl:"/page/OrgInfo",userForm:{orderId:"",userName:"",workerName:"",createStartTime:"",createEndTime:"",serviceStartTime:"",serviceEndTime:"",catePid:"",cateId:"",stateId:"",pageSize:10,pageNum:1},tableEles:[{name:"订单号",value:"id",ifControl:!1,eventName:"link-to"},{name:"订单状态",value:"state",ifControl:!1,eventName:""},{name:"下单时间",value:"createTime",ifControl:!1,eventName:""},{name:"老人姓名",value:"userName",ifControl:!1,eventName:""},{name:"服务人员姓名",value:"workerName",ifControl:!1,eventName:""},{name:"服务人员手机",value:"workerMobile",ifControl:!1,eventName:""},{name:"服务开始时间",value:"serviceTime",ifControl:!1,eventName:""},{name:"预定服务时长/h",value:"durationShow",ifControl:!1,eventName:""},{name:"订单总额",value:"price",ifControl:!1,eventName:""}],totalPage:0,data:[],orderTime:[],serverTime:[],orderStateDict:[],categories:[],secondCategories:[],stateArr:[]}},components:{tables:n.a,PageContainer:c.a},created:function(){this.orderStateDict=new s.a,this.getOrderStateDict(),this.getCategory(),this.getLists()},methods:{getOrderStateDict:function(){var e=this;this.$http.get("http://mp.17link.cc/order/orderStateDict").then(function(t){var r=t.data.data;e.stateArr=r.state,e.stateArr.forEach(function(t){e.orderStateDict.set(t.text,t.id)})}).catch(function(e){return console.log})},getCategory:function(){var e=this;this.$http.get("http://mp.17link.cc/manage/category/query").then(function(t){var r=t.data.data;e.categories=r.list}).catch(function(e){return console.log})},linkto:function(e){this.$router.push({path:"/integratedMana/oDetail",query:{orderId:e.id,state:this.orderStateDict.get(e.state),source:"oManagerment"}})},pageChange:function(e){this.userForm.pageNum=e,this.getLists()},reSet:function(){this.userForm={orderId:"",userName:"",workerName:"",createStartTime:"",createEndTime:"",serviceStartTime:"",serviceEndTime:"",catePid:"",cateId:"",stateId:"",pageSize:10,pageNum:1},this.orderTime=[],this.serverTime=[]},getLists:function(){var e=this;this.userForm.createStartTime="",this.userForm.createEndTime="",this.userForm.serviceStartTime="",this.userForm.serviceEndTime="",this.orderTime.length>0&&this.orderTime[0]&&this.orderTime[1]&&(this.userForm.createStartTime=this.orderTime[0].getTime(),this.userForm.createEndTime=this.orderTime[1].getTime()),this.serverTime.length>0&&this.serverTime[0]&&this.serverTime[1]&&(this.userForm.serviceStartTime=this.serverTime[0].getTime(),this.userForm.serviceEndTime=this.serverTime[1].getTime()),this.$http.post("http://mp.17link.cc/order/parentOrderList",this.userForm).then(function(t){var r=t.data.data;e.totalPage=r.data.count,e.data=r.data.orderList,e.data.forEach(function(e){e.createTime=Object(l.format)(e.createTime,"YYYY-MM-DD HH:mm:SS"),e.serviceTime=Object(l.format)(e.serviceTime,"YYYY-MM-DD HH:mm:SS"),e.duration&&0!=e.duration&&(e.durationShow=e.duration/60)})}).catch(function(e){return console.log})},newOrder:function(){this.$router.push({path:"/serviceSystem/newOrder"})},getQuery:function(e){var t="";for(var r in e)"object"===o()(e[r])?t+=this.getQuery(e[r]):t+=r+"="+e[r]+"&";return t},getParams:function(e){return e.slice(0,-1)}},watch:{"userForm.catePid":function(){var e=this,t=this.categories.filter(function(t){return t.catePid===e.userForm.catePid});t.length&&t.length>0?this.secondCategories=t[0].cate:this.secondCategories=[]}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("pageContainer",{staticClass:"order-m",attrs:{title:"订单管理"}},[r("div",{staticClass:"search"},[r("div",{staticClass:"search-table"},[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.newOrder}},[e._v("创建新的订单")])],1)],1),e._v(" "),r("el-form",{staticClass:"demo-ruleForm form",attrs:{model:e.userForm,"label-width":"100px","label-position":"left"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"订单号",prop:"email"}},[r("el-input",{model:{value:e.userForm.orderId,callback:function(t){e.$set(e.userForm,"orderId",t)},expression:"userForm.orderId"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"老人姓名",prop:"email"}},[r("el-input",{model:{value:e.userForm.userName,callback:function(t){e.$set(e.userForm,"userName",t)},expression:"userForm.userName"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"服务人员姓名",prop:"email"}},[r("el-input",{model:{value:e.userForm.workerName,callback:function(t){e.$set(e.userForm,"workerName",t)},expression:"userForm.workerName"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"订单状态","label-width":"100px"}},[r("el-select",{attrs:{placeholder:"请选择订单状态"},model:{value:e.userForm.stateId,callback:function(t){e.$set(e.userForm,"stateId",t)},expression:"userForm.stateId"}},[r("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.stateArr,function(e){return r("el-option",{key:e.id,attrs:{label:e.text,value:e.id}})})],2)],1)],1),e._v(" "),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"服务品类"}},[r("el-select",{attrs:{placeholder:"请选择一级品类"},model:{value:e.userForm.catePid,callback:function(t){e.$set(e.userForm,"catePid",t)},expression:"userForm.catePid"}},[r("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.categories,function(e){return r("el-option",{key:e.catePid,attrs:{label:e.cateName,value:e.catePid}})})],2)],1)],1),e._v(" "),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"","label-width":"0"}},[r("el-select",{attrs:{placeholder:"请选择二级品类"},model:{value:e.userForm.cateId,callback:function(t){e.$set(e.userForm,"cateId",t)},expression:"userForm.cateId"}},[r("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),e._l(e.secondCategories,function(e){return r("el-option",{key:e.cateId,attrs:{label:e.cateName,value:e.cateId}})})],2)],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"下单时间"}},[r("el-date-picker",{attrs:{type:"datetimerange",placeholder:"选择时间范围"},model:{value:e.orderTime,callback:function(t){e.orderTime=t},expression:"orderTime"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{label:"服务开始时间"}},[r("el-date-picker",{attrs:{type:"datetimerange",placeholder:"选择时间范围"},model:{value:e.serverTime,callback:function(t){e.serverTime=t},expression:"serverTime"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.getLists}},[e._v("筛选")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.reSet}},[e._v("重置")]),e._v(" "),r("el-button",{attrs:{type:"primary"}},[r("a",{staticClass:"download",attrs:{download:"test",href:"http://mp.17link.cc/order/orderExport?"+e.getParams(e.getQuery(this.userForm))}},[e._v("导出")])])],1)],1)],1)],1)]),e._v(" "),r("tables",{staticClass:"list",attrs:{tableEles:e.tableEles,totalPage:e.totalPage,data:e.data},on:{"pagination-click":e.pageChange,"link-to":e.linkto}})],1)},staticRenderFns:[]};var u=r("/Xao")(m,d,!1,function(e){r("mBpt")},null,null);t.default=u.exports},KjeV:function(e,t,r){(e.exports=r("BkJT")(!1)).push([e.i,"\n.order-m .search .head {\n  background-color: #fff;\n}\n.order-m .search .head h5 {\n    padding: 0px 38px 0px 38px;\n    height: 42px;\n    line-height: 42px;\n    font-size: 22px;\n    color: #616d80;\n    border: 1px solid #CAD3DF;\n    border-bottom: none;\n    text-align: center;\n    background-color: #FBFBFB;\n    border-radius: 5px 5px 0 0;\n}\n.order-m .search .search-table {\n  padding-top: 10px;\n  margin-top: -1px;\n  padding-left: 32px;\n}\n.order-m .search .search-table .button {\n    margin-left: 31px;\n    margin-bottom: 10px;\n}\n.order-m .list {\n  margin-top: 32px;\n}\n.order-m .download {\n  width: 100%;\n  color: #fff;\n}\n",""])},mBpt:function(e,t,r){var a=r("KjeV");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("8bSs")("7f1e4541",a,!0)}});