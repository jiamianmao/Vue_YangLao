webpackJsonp([40],{"G+uW":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("lC5x"),s=t.n(a),n=t("J0Oq"),o=t.n(n),i=t("rppN"),u=t("qn+5"),l=t("M8s3"),c=t("wYMm"),m={data:function(){var e,r=this,t=(e=o()(s.a.mark(function e(t,a,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/^1[1-9]\d{9}$/.test(a)){e.next=12;break}return e.prev=1,e.next=4,r.$http.get("http://ums.17link.cc/user/getUserByUserName.do?username="+r.userForm.username);case 4:n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),setTimeout(function(){n(new Error(e.t0.message))},3e3);case 10:e.next=13;break;case 12:n(new Error("请输入有效的手机号码"));case 13:case"end":return e.stop()}},e,r,[[1,7]])})),function(r,t,a){return e.apply(this,arguments)});return{userForm:{name:"",username:"",type:window._dataInfo.type,orgName:"",orgId:"",addUserId:window._dataInfo.id,addUserName:window._dataInfo.name},ifShow:!0,rules:{name:[{required:!0,message:"用户姓名不能为空"}],orgName:[{required:!0,message:"机构姓名不能为空"}],username:[{type:"number",required:!0,message:"请输入电话号码",trigger:"blur"},{validator:t,trigger:"blur"}]},showDialog:!1,id:window._dataInfo.id,addressList:[]}},components:{cityArea:u.a,orgChoose:l.a,PageContainer:i.a},created:function(){this.$route.query.id&&this.$route.query.name&&(this.userForm.orgId=this.$route.query.id,this.userForm.orgName=this.$route.query.name,this.ifShow=!1)},methods:{selectChange:function(e){this.addressList=e},save:function(e){var r,t=this;this.$refs.userForm.validate((r=o()(s.a.mark(function r(a){var n,o;return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!a){r.next=5;break}return r.next=3,t.$http.post("http://ums.17link.cc/user/addUser.do",t.userForm);case 3:(n=r.sent).data.errCode===c.a?(o=n.data.data.id,e?t.$refs.userForm.resetFields():t.$router.push({path:"/pt/AccountInfo",query:{id:o}})):alert(n.data.errMessage);case 5:case"end":return r.stop()}},r,t)})),function(e){return r.apply(this,arguments)}))},chooseOrg:function(){this.showDialog=!0},dialogClick:function(e){e&&e.id&&e.name&&(this.userForm.orgName=e.name,this.userForm.orgId=e.id),this.showDialog=!1}}},d={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("page-container",{attrs:{title:"添加机构账号","show-back-btn":""}},[t("el-form",{ref:"userForm",staticClass:"info-container",attrs:{model:e.userForm,"label-position":"left","label-width":"100px",rules:e.rules}},[t("el-row",[t("el-col",{attrs:{span:20}},[t("el-form-item",{attrs:{label:"服务区域"}},[e.ifShow?t("cityArea",{ref:"area",attrs:{prop:"desc"},on:{"select-change":e.selectChange}}):e._e()],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:7}},[e.ifShow?t("el-form-item",{attrs:{label:"机构名称：",prop:"orgName"}},[e._v("\n                    "+e._s(e.userForm.orgName)+"\n                    "),t("el-button",{on:{click:e.chooseOrg}},[e._v("选择服务机构")])],1):e._e(),e._v(" "),t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{model:{value:e.userForm.name,callback:function(r){e.$set(e.userForm,"name",r)},expression:"userForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"手机号",prop:"username"}},[t("el-input",{model:{value:e.userForm.username,callback:function(r){e.$set(e.userForm,"username",e._n(r))},expression:"userForm.username"}})],1)],1)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.save(!1)}}},[e._v("保存")]),e._v(" "),t("el-button",{attrs:{type:"plain"},on:{click:function(r){e.save(!0)}}},[e._v("保存下一条")])],1)],1),e._v(" "),e.showDialog?t("orgChoose",{attrs:{areaData:e.addressList},on:{"pop-click":e.dialogClick}}):e._e()],1)},staticRenderFns:[]},p=t("/Xao")(m,d,!1,null,null,null);r.default=p.exports},wYMm:function(e,r,t){"use strict";t.d(r,"a",function(){return a});var a=0}});