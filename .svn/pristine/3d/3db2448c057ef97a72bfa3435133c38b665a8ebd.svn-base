webpackJsonp([3,18,32,33],{"/4kg":function(e,t,a){var r=a("8AOE");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("8bSs")("86d0e8e4",r,!0)},"/bmf":function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.must .el-form-item__label::before {\n  content: '*';\n  color: #ff4949;\n  margin-right: 4px;\n  margin-left: 10px;\n}\n",""])},"2g+r":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("lC5x"),o=a.n(r),n=a("J0Oq"),i=a.n(n),s=a("rppN"),l=a("8I40"),c=a("4c8d"),d=a("D7x1"),u=a("SDIC"),m=a("il66"),p=a("7XyB"),f=a("STY9"),h={data:function(){return{userForm:{managerId:window._dataInfo.id,managerName:window._dataInfo.name,name:"",sex:"1",userHeadPic:"",orgId:window._dataInfo.orgId,orgName:window._dataInfo.orgName,politicalStatus:"",iDNumber:"",birthday:"",age:"",securityNo:"",mobile:"",phone:"",residentialAddress:{cityId:"",cityName:"",community:"",detailedAddress:"",provinceId:"",provinceName:"",streetId:"",streetName:"",zoneId:"",zoneName:""},serviceAddress:[],emergencyContact:[],subsidyAmount:{end:"",orgName:"",residualAmount:"",start:"",totalAmont:"",type:""},remark:"",attachmentUrl:"",amount:"",allowanceStartDate:"",allowanceEndDate:"",religion:"",occupation:"",incomeSource:[],incomeLevel:"",selfCareLevel:[],liveAloneLevel:"",medicalType:[],takeCareType:[],serviceDemand:[],downsizeReason:"",disabilityType:[],disabilityLevel:"",nation:""},addressNum:1,time:[],ifEdit:!0,emergencyContactNum:1,emergencyContact:[],residentialAddress:{cityId:"",cityName:"",community:"",detailedAddress:"",provinceId:"",provinceName:"",streetId:"",streetName:"",zoneId:"",zoneName:""},rules:{name:Object(m.b)("姓名"),sex:Object(m.b)("性别"),politicalStatus:Object(m.b)("政治面貌"),iDNumber:{type:"string",length:18,required:!0,message:"请输入正确的身份证账号",trigger:"blur"},birthday:Object(m.b)("出生日期"),age:Object(m.b)("年龄"),securityNo:{type:"string",max:20,required:!0,message:"请输入正确的社保账号",trigger:"blur"},mobile:{type:"number",length:11,required:!0,message:"请输入正确的手机号码",trigger:"blur"},phone:{type:"string",max:15,required:!0,message:"请填入正确的座机号",trigger:"blur"},amount:[{required:!0,message:"请输入政府补助金",trigger:"blur"},{validator:function(e,t,a){/^\d{1,20}(\.\d{1,2})?$/.test(parseFloat(t))?a():a(new Error("请填入正确的金额"))},trigger:"blur"}],nation:Object(m.b)("民族")},tableEles:[{name:"类型",value:"type",ifControl:!1,eventName:""},{name:"养老机构",value:"orgName",ifControl:!1,eventName:""},{name:"使用开始时间",value:"start",ifControl:!1,eventName:""},{name:"使用结束时间",value:"end",ifControl:!1,eventName:""},{name:"总金额",value:"totalAmont",ifControl:!1,eventName:""},{name:"剩余金额",value:"residualAmount",ifControl:!1,eventName:""}],subsidyAmount:[],showDialog:!1,orgData:[],type:window._dataInfo.type,imageUrl:"",enums:{religion:[],occupation:[],incomeSource:[],incomeLevel:[],selfCareLevel:[],liveAloneLevel:[],medicalType:[],takeCareType:[],serviceDemand:[],downsizeReason:[],disabilityType:[],disabilityLevel:[],nation:[]},politicalOutlook:["中共党员","中共预备党员","共青团员","民革会员","民盟盟员","民建会员","民进会员","农工党党员","致公党党员","九三学社社员","台盟盟员","无党派民主人士","群众"],serviceTime:"",id:""}},components:{eArea:l.default,eInfo:c.default,tables:d.a,popup:u.default,FormChunkLabel:f.a,PageContainer:s.a},created:function(){this.id=this.$route.query.id,this.getEnums(),this.id&&this.getElderlyInfo()},computed:{controlState:function(){return!(!this.id||!this.ifEdit)},ifShowDisability:function(){return-1!==this.userForm.selfCareLevel.indexOf(4)},title:function(){return this.id?"老人详情":"添加老人"}},methods:{getEnums:function(){var e=this;return i()(o.a.mark(function t(){var a,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get("http://mp.17link.cc/manage/user/enums");case 3:a=t.sent,r=a.data.data,e.enums=r,e.serviceTime=r.time,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert(t.t0);case 12:case"end":return t.stop()}},t,e,[[0,9]])}))()},getElderlyInfo:function(){var e=this;this.$http.post("http://mp.17link.cc/manage/user/detail","id="+this.id).then(function(t){var a=t.data.data;e.userForm=a,e.emergencyContact=a.emergencyContact,e.emergencyContactNum=e.emergencyContact.length,e.residentialAddress=a.residentialAddress,e.addressNum=a.serviceAddress.length,e.subsidyAmount=[],e.subsidyAmount.push(e.userForm.subsidyAmount),e.subsidyAmount.forEach(function(e){e.type=1===e.type?"政府":"其他",e.start=Object(p.format)(e.start,"YYYY-MM-DD HH:mm:SS"),e.end=Object(p.format)(e.end,"YYYY-MM-DD HH:mm:SS")}),e.imageUrl=e.userForm.userHeadPic,e.userForm.mobile=1*e.userForm.mobile,e.orgData=[],e.orgData.push({orgName:e.userForm.orgName}),e.userForm.religion=parseInt(e.userForm.religion),e.userForm.occupation=parseInt(e.userForm.occupation),e.userForm.incomeLevel=parseInt(e.userForm.incomeLevel),e.userForm.liveAloneLevel=parseInt(e.userForm.liveAloneLevel),e.userForm.downsizeReason=parseInt(e.userForm.downsizeReason),e.userForm.disabilityLevel=parseInt(e.userForm.disabilityLevel),e.getBirthday()}).catch(function(e){return console.log})},getEmergencyContact:function(e,t){this.userForm.emergencyContact[t]=e},editInfo:function(){this.ifEdit=!1},confirmInfo:function(){var e=this,t=this;this.$refs.userForm.validate(function(a){if(!a)return alert("请按照规定格式填写信息"),!1;t.userForm.id=t.id;var r=e.userForm.subsidyAmount;if(r.end=new Date(r.end).getTime(),r.start=new Date(r.start).getTime(),r.type="政府"===r.type?1:2,t.userForm.userHeadPic=t.imageUrl,!t.checkArgus())return!1;t.$http.post("http://mp.17link.cc/manage/user/update",t.userForm).then(function(e){alert("更新成功"),t.$router.back()}).catch(function(e){return alert(e)})})},goback:function(){this.$router.back()},getBirthday:function(){if(18===this.userForm.iDNumber.length){var e=this.userForm.iDNumber.substring(6,10),t=this.userForm.iDNumber.substring(10,12),a=this.userForm.iDNumber.substring(12,14);this.userForm.birthday=e+"年"+t+"月"+a+"日",this.userForm.age=this.getAge(this.serviceTime,1*e,1*t,1*a)}},checkArgus:function(){return this.userForm.residentialAddress.length<=0?(alert("请选择居住地址"),!1):!(this.userForm.serviceAddress.length<=0)||(alert("请选择服务地址"),!1)},save:function(){var e=this;this.$refs.userForm.validate(function(t){return t?e.time.length>0?(e.userForm.allowanceStartDate=e.time[0].getTime(),e.userForm.allowanceEndDate=e.time[1].getTime(),e.userForm.userHeadPic=e.imageUrl,!!e.checkArgus()&&void e.$http.post("http://mp.17link.cc/manage/user/add",e.userForm).then(function(t){alert("添加成功"),e.$router.back()}).catch(function(e){return alert(e)})):(alert("请选择政府补助时间范围"),!1):(alert("请按照规定格式填写信息"),!1)})},next:function(){var e=this,t=this;this.$refs.userForm.validate(function(a){return a?e.time.length>0?(e.userForm.allowanceStartDate=e.time[0].getTime(),e.userForm.allowanceEndDate=e.time[1].getTime(),e.userForm.userHeadPic=e.imageUrl,!!e.checkArgus&&void t.$http.post("http://mp.17link.cc/manage/user/add",t.userForm).then(function(e){t.$router.go(0)}).catch(function(e){return alert(e)})):(alert("请选择政府补助时间范围"),!1):(alert("请按照规定格式填写信息"),!1)})},addArea:function(){this.addressNum+=1,this.userForm.serviceAddress.push({cityId:"",cityName:"",community:"",detailedAddress:"",provinceId:"",provinceName:"",streetId:"",streetName:"",zoneId:"",zoneName:""})},cutArea:function(){this.addressNum-=1,this.addressNum<1&&(this.addressNum=1),this.userForm.serviceAddress.pop()},addEmergency:function(){this.emergencyContactNum+=1,this.userForm.emergencyContact.push({mobile:"",name:"",phone:"",relation:""})},cutEmergency:function(){this.emergencyContactNum-=1,this.emergencyContactNum<1&&(this.emergencyContactNum=1),this.userForm.emergencyContact.pop()},residentSelect:function(e){console.log(e),this.userForm.residentialAddress=e},serviceSelect:function(e,t){this.userForm.serviceAddress[t]=e},handleAvatarSuccess:function(e){this.userForm.attachmentUrl=e.data.url},beforeAvatarUpload:function(e){var t=e.size/1024/1024<10;return t||this.$message.error("上传文件不能超过10m!"),t},userpichandleAvatarSuccess:function(e){this.imageUrl=e.data.url,console.log("--------------------"),console.log(this.imageUrl),console.log("--------------------")},userpicbeforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<5;return t||this.$message.error("上传头像图片只能是 JPG/PNG 格式!"),a||this.$message.error("上传头像图片大小不能超过 5MB!"),t&&a},recharge:function(){this.showDialog=!0},dialogClick:function(e){var t=this;if(e){if(2===e.type&&e.amount>this.subsidyAmount[0].residualAmount)return alert("余额不足，无法进行该操作"),!1;this.$http.post("http://mp.17link.cc/manage/user/recharge",e).then(function(e){alert("操作成功"),t.$router.go(0)}).catch(function(e){console.log(e)})}this.showDialog=!1},getAge:function(e,t,a,r){var o=new Date(e).getFullYear(),n=new Date(e).getMonth()+1,i=new Date(e).getDate(),s=o-t;return n<=a&&(n===a?i<r&&s--:s--),s}},watch:{}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("PageContainer",{staticClass:"add-oper",attrs:{title:e.title}},[a("div",{staticClass:"my-form"},[a("el-row",[a("el-button",{staticClass:"back-btn",attrs:{icon:"el-icon-arrow-left",type:"plain"},on:{click:function(t){e.$router.back()}}},[e._v("返回")])],1),e._v(" "),a("el-form",{ref:"userForm",staticClass:"demo-ruleForm",attrs:{model:e.userForm,"label-position":"left","label-width":"150px",rules:e.rules}},[a("form-chunk-label",{attrs:{title:"老人基本信息"}},[e.id&&2!==e.type?a("el-button",{attrs:{icon:"el-icon-edit",type:"primary",size:"small"},on:{click:e.editInfo}},[e._v("\n                    修改\n                ")]):e._e()],1),e._v(" "),a("div",{staticClass:"oper-base-info"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[0===e.type?a("el-input",{attrs:{disabled:e.controlState},model:{value:e.userForm.name,callback:function(t){e.$set(e.userForm,"name",t)},expression:"userForm.name"}}):a("el-input",{attrs:{disabled:!!e.id},model:{value:e.userForm.name,callback:function(t){e.$set(e.userForm,"name",t)},expression:"userForm.name"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"老人性别",prop:"sex"}},[0===e.type?a("el-select",{attrs:{placeholder:"请选择机构状态",disabled:e.controlState},model:{value:e.userForm.sex,callback:function(t){e.$set(e.userForm,"sex",t)},expression:"userForm.sex"}},[a("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"女",value:"2"}})],1):a("el-select",{attrs:{placeholder:"请选择机构状态",disabled:!!e.id},model:{value:e.userForm.sex,callback:function(t){e.$set(e.userForm,"sex",t)},expression:"userForm.sex"}},[a("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"女",value:"2"}})],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"民族",prop:"nation"}},[a("el-select",{attrs:{placeholder:"请选择民族",disabled:e.controlState},model:{value:e.userForm.nation,callback:function(t){e.$set(e.userForm,"nation",t)},expression:"userForm.nation"}},e._l(e.enums.nation,function(e){return a("el-option",{key:e.code,attrs:{label:e.text,value:e.code}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"政治面貌",prop:"politicalStatus"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:e.controlState},model:{value:e.userForm.politicalStatus,callback:function(t){e.$set(e.userForm,"politicalStatus",t)},expression:"userForm.politicalStatus"}},e._l(e.politicalOutlook,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}))],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"身份证号",prop:"iDNumber"}},[0===e.type?a("el-input",{attrs:{disabled:e.controlState},on:{blur:e.getBirthday},model:{value:e.userForm.iDNumber,callback:function(t){e.$set(e.userForm,"iDNumber",t)},expression:"userForm.iDNumber"}}):a("el-input",{attrs:{disabled:!!e.id},on:{blur:e.getBirthday},model:{value:e.userForm.iDNumber,callback:function(t){e.$set(e.userForm,"iDNumber",t)},expression:"userForm.iDNumber"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"出生日期",prop:"birthday"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userForm.birthday,callback:function(t){e.$set(e.userForm,"birthday",t)},expression:"userForm.birthday"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{attrs:{disabled:""},model:{value:e.userForm.age,callback:function(t){e.$set(e.userForm,"age",t)},expression:"userForm.age"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"社保号码",prop:"securityNo"}},[0===e.type?a("el-input",{attrs:{disabled:e.controlState},model:{value:e.userForm.securityNo,callback:function(t){e.$set(e.userForm,"securityNo",t)},expression:"userForm.securityNo"}}):a("el-input",{attrs:{disabled:!!e.id},model:{value:e.userForm.securityNo,callback:function(t){e.$set(e.userForm,"securityNo",t)},expression:"userForm.securityNo"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"手     机",prop:"mobile"}},[a("el-input",{attrs:{disabled:e.controlState},model:{value:e.userForm.mobile,callback:function(t){e.$set(e.userForm,"mobile",e._n(t))},expression:"userForm.mobile"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"固定电话",prop:"phone"}},[a("el-input",{attrs:{disabled:e.controlState},model:{value:e.userForm.phone,callback:function(t){e.$set(e.userForm,"phone",t)},expression:"userForm.phone"}})],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"must ml",attrs:{label:"居住地址",prop:"liveArea"}},[a("e-area",{attrs:{check:"true",ifEdit:e.controlState,data:e.residentialAddress},on:{"select-change":e.residentSelect}})],1),e._v(" "),a("el-row",[e._l(e.addressNum,function(t){return a("el-form-item",{key:t,staticClass:"must ml",attrs:{label:"服务地址",prop:"serArea"}},[a("e-area",{attrs:{check:"true",ifEdit:e.controlState,curNum:t-1,data:e.userForm.serviceAddress[t-1]},on:{"select-change":e.serviceSelect}})],1)}),e._v(" "),e.controlState?e._e():a("div",[a("el-button",{staticClass:"control",attrs:{type:"primary"},on:{click:e.addArea}},[e._v("+")]),e._v(" "),e.addressNum>1?a("el-button",{staticClass:"control",attrs:{type:"primary"},on:{click:e.cutArea}},[e._v("-")]):e._e()],1)],2),e._v(" "),a("el-row",[e._l(e.emergencyContactNum,function(t){return a("el-form-item",{key:t,attrs:{label:"紧急联系人信息"}},[a("e-info",{attrs:{ifEdit:e.controlState,curNum:t-1,info:e.emergencyContact[t-1]},on:{"value-change":e.getEmergencyContact}})],1)}),e._v(" "),e.controlState?e._e():[a("el-button",{staticClass:"control",attrs:{type:"primary"},on:{click:e.addEmergency}},[e._v("+")]),e._v(" "),e.emergencyContactNum>1?a("el-button",{staticClass:"control",attrs:{type:"primary"},on:{click:e.cutEmergency}},[e._v("-")]):e._e()]],2),e._v(" "),e.id?e._e():[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"must ml",attrs:{label:"政府补助",prop:"amount"}},[a("el-input",{model:{value:e.userForm.amount,callback:function(t){e.$set(e.userForm,"amount",t)},expression:"userForm.amount"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"must ml",attrs:{label:"补助时间（开始-结束）"}},[a("el-date-picker",{attrs:{type:"datetimerange",placeholder:"选择时间范围"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)],1)],1)]],2),e._v(" "),a("form-chunk-label",{attrs:{title:"老人数据采集（非必填）"}}),e._v(" "),a("div",{staticClass:"oper-other-info"},[a("el-row",[a("el-form-item",{attrs:{label:"宗教信仰",prop:"religion"}},[a("el-radio-group",{attrs:{disabled:e.controlState},model:{value:e.userForm.religion,callback:function(t){e.$set(e.userForm,"religion",t)},expression:"userForm.religion"}},e._l(e.enums.religion,function(t){return a("el-radio",{key:t.code,attrs:{label:t.code}},[e._v(e._s(t.text))])}))],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"退休前工作",prop:"occupation"}},[a("el-radio-group",{attrs:{disabled:e.controlState},model:{value:e.userForm.occupation,callback:function(t){e.$set(e.userForm,"occupation",t)},expression:"userForm.occupation"}},e._l(e.enums.occupation,function(t){return a("el-radio",{key:t.code,attrs:{label:t.code}},[e._v(e._s(t.text))])}))],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"收入来源",prop:"incomeSource"}},[a("el-checkbox-group",{model:{value:e.userForm.incomeSource,callback:function(t){e.$set(e.userForm,"incomeSource",t)},expression:"userForm.incomeSource"}},e._l(e.enums.incomeSource,function(t){return a("el-checkbox",{key:t.code,attrs:{label:t.code,disabled:e.controlState}},[e._v(e._s(t.text))])}))],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"收入类别",prop:"incomeLevel"}},[a("el-radio-group",{attrs:{disabled:e.controlState},model:{value:e.userForm.incomeLevel,callback:function(t){e.$set(e.userForm,"incomeLevel",t)},expression:"userForm.incomeLevel"}},e._l(e.enums.incomeLevel,function(t){return a("el-radio",{key:t.code,attrs:{label:t.code}},[e._v(e._s(t.text))])}))],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"自理能力",prop:"selfCareLevel"}},[a("el-checkbox-group",{model:{value:e.userForm.selfCareLevel,callback:function(t){e.$set(e.userForm,"selfCareLevel",t)},expression:"userForm.selfCareLevel"}},e._l(e.enums.selfCareLevel,function(t){return a("el-checkbox",{key:t.code,attrs:{label:t.code,disabled:e.controlState}},[e._v(e._s(t.text))])}))],1)],1),e._v(" "),a("el-row",[e.ifShowDisability?a("el-form-item",{attrs:{label:"残疾类型（可多选）",prop:"disabilityType"}},[a("el-checkbox-group",{model:{value:e.userForm.disabilityType,callback:function(t){e.$set(e.userForm,"disabilityType",t)},expression:"userForm.disabilityType"}},e._l(e.enums.disabilityType,function(t){return a("el-checkbox",{key:t.code,attrs:{label:t.code,disabled:e.controlState}},[e._v(e._s(t.text))])}))],1):e._e()],1),e._v(" "),a("el-row",[e.ifShowDisability?a("el-form-item",{attrs:{label:"残疾证等级",prop:"disabilityLevel"}},[a("el-radio-group",{attrs:{disabled:e.controlState},model:{value:e.userForm.disabilityLevel,callback:function(t){e.$set(e.userForm,"disabilityLevel",t)},expression:"userForm.disabilityLevel"}},e._l(e.enums.disabilityLevel,function(t){return a("el-radio",{key:t.code,attrs:{label:t.code}},[e._v(e._s(t.text))])}))],1):e._e()],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"是否独居",prop:"liveAloneLevel"}},[a("el-radio-group",{attrs:{disabled:e.controlState},model:{value:e.userForm.liveAloneLevel,callback:function(t){e.$set(e.userForm,"liveAloneLevel",t)},expression:"userForm.liveAloneLevel"}},e._l(e.enums.liveAloneLevel,function(t){return a("el-radio",{key:t.code,attrs:{label:t.code}},[e._v(e._s(t.text))])}))],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"医疗类别",prop:"medicalType"}},[a("el-checkbox-group",{model:{value:e.userForm.medicalType,callback:function(t){e.$set(e.userForm,"medicalType",t)},expression:"userForm.medicalType"}},e._l(e.enums.medicalType,function(t){return a("el-checkbox",{key:t.code,attrs:{label:t.code,disabled:e.controlState}},[e._v(e._s(t.text))])}))],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"目前照料方式（多选）",prop:"takeCareType"}},[a("el-checkbox-group",{model:{value:e.userForm.takeCareType,callback:function(t){e.$set(e.userForm,"takeCareType",t)},expression:"userForm.takeCareType"}},e._l(e.enums.takeCareType,function(t){return a("el-checkbox",{key:t.code,attrs:{label:t.code,disabled:e.controlState}},[e._v(e._s(t.text))])}))],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"服务需求（可多选）",prop:"serviceDemand"}},[a("el-checkbox-group",{model:{value:e.userForm.serviceDemand,callback:function(t){e.$set(e.userForm,"serviceDemand",t)},expression:"userForm.serviceDemand"}},e._l(e.enums.serviceDemand,function(t){return a("el-checkbox",{key:t.code,attrs:{label:t.code,disabled:e.controlState}},[e._v(e._s(t.text))])}))],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"减员原因",prop:"downsizeReason"}},[a("el-radio-group",{attrs:{disabled:e.controlState},model:{value:e.userForm.downsizeReason,callback:function(t){e.$set(e.userForm,"downsizeReason",t)},expression:"userForm.downsizeReason"}},e._l(e.enums.downsizeReason,function(t){return a("el-radio",{key:t.code,attrs:{label:t.code}},[e._v(e._s(t.text))])}))],1)],1)],1),e._v(" "),a("div",{staticClass:"userpic"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{disabled:e.controlState,action:"http://upload.17link.cc/upload.do","show-file-list":!1,"on-success":e.userpichandleAvatarSuccess,"before-upload":e.userpicbeforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),e.id?e.controlState?e._e():a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.confirmInfo("userForm")}}},[e._v("确认")])],1):a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save("userForm")}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.next}},[e._v("保存下一条")])],1)],1),e._v(" "),e.controlState?a("div",{staticClass:"account"},[a("form-chunk-label",{attrs:{title:"账户额度"}},[1===e.type?a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.recharge}},[e._v("充值")]):e._e()],1),e._v(" "),a("tables",{staticClass:"table",attrs:{tableEles:e.tableEles,data:e.subsidyAmount}})],1):e._e(),e._v(" "),e.controlState?a("div",{staticClass:"org"},[a("form-chunk-label",{attrs:{title:"所属机构"}}),e._v(" "),a("el-table",{staticClass:"list",attrs:{data:e.orgData,stripe:"",border:"",align:"center"}},[a("el-table-column",{attrs:{prop:"orgName",label:"机构名称"}})],1)],1):e._e(),e._v(" "),e.showDialog?a("popup",{attrs:{userId:this.id},on:{"pop-click":e.dialogClick}}):e._e()],1)},staticRenderFns:[]};var b=a("/Xao")(h,v,!1,function(e){a("/4kg")},"data-v-69d000e4",null);t.default=b.exports},"4c8d":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",[a("el-input",{attrs:{disabled:e.ifEdit,placeholder:"紧急联系人姓名"},on:{change:e.inputChange},model:{value:e.infoData.name,callback:function(t){e.$set(e.infoData,"name",t)},expression:"infoData.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",[a("el-input",{attrs:{disabled:e.ifEdit,placeholder:"与老人关系"},on:{change:e.inputChange},model:{value:e.infoData.relation,callback:function(t){e.$set(e.infoData,"relation",t)},expression:"infoData.relation"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",[a("el-input",{attrs:{disabled:e.ifEdit,placeholder:"手机号"},on:{change:e.inputChange},model:{value:e.infoData.mobile,callback:function(t){e.$set(e.infoData,"mobile",t)},expression:"infoData.mobile"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-form-item",[a("el-input",{attrs:{disabled:e.ifEdit,placeholder:"座机"},on:{change:e.inputChange},model:{value:e.infoData.phone,callback:function(t){e.$set(e.infoData,"phone",t)},expression:"infoData.phone"}})],1)],1)],1)},staticRenderFns:[]};var o=a("/Xao")({name:"eInfo",props:["curNum","ifEdit","info","check"],data:function(){return{infoData:{mobile:"",name:"",phone:"",relation:""}}},created:function(){},mounted:function(){this.info&&(this.infoData=this.info)},methods:{inputChange:function(){this.$emit("value-change",this.infoData,this.curNum)}},watch:{info:function(){this.infoData=this.info}}},r,!1,function(e){a("Yz1A")},null,null);t.default=o.exports},"8AOE":function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.add-oper .head[data-v-69d000e4] {\n  background-color: #fff;\n}\n.add-oper .head h5[data-v-69d000e4] {\n    padding: 0px 38px 0px 38px;\n    height: 42px;\n    line-height: 42px;\n    font-size: 22px;\n    color: #616d80;\n    border: 1px solid #CAD3DF;\n    border-bottom: none;\n    text-align: center;\n    background-color: #FBFBFB;\n    border-radius: 5px 5px 0 0;\n}\n.add-oper .head div[data-v-69d000e4] {\n    width: calc(100%-150px);\n    height: 42px;\n    background-color: #fff;\n    border-bottom: 1px solid #CAD3DF;\n}\n.add-oper .my-form[data-v-69d000e4] {\n  padding-bottom: 50px;\n  border-top: none;\n}\n.add-oper .my-form .oper-other-info[data-v-69d000e4], .add-oper .my-form .oper-base-info[data-v-69d000e4] {\n    padding-left: 31px;\n    padding-top: 10px;\n}\n.add-oper .my-form .back-btn[data-v-69d000e4] {\n    margin: 28px 0 28px 42px;\n    color: #616d80;\n}\n.add-oper .my-form .area[data-v-69d000e4] {\n    position: relative;\n}\n.add-oper .my-form .area .area-button[data-v-69d000e4] {\n      position: absolute;\n      top: 0px;\n      right: 0;\n      width: 26%;\n}\n.add-oper .my-form .stars[data-v-69d000e4] {\n    padding-top: 8px;\n}\n.add-oper .my-form .m-l[data-v-69d000e4] {\n    margin-left: 20px;\n}\n.add-oper .my-form .el-form .el-form-item .el-form-item__label[data-v-69d000e4]::before {\n    content: '*';\n    color: #ff4949;\n    margin-right: 4px;\n    margin-left: 10px;\n}\n.add-oper .my-form .userpic[data-v-69d000e4] {\n    position: absolute;\n    right: 174px;\n    top: 236px;\n    border: 1px solid #8c939d;\n}\n.add-oper .my-form .userpic .avatar-uploader .el-upload[data-v-69d000e4] {\n      border: 1px dashed #d9d9d9;\n      border-radius: 6px;\n      cursor: pointer;\n      position: relative;\n      overflow: hidden;\n}\n.add-oper .my-form .userpic .avatar-uploader .el-upload[data-v-69d000e4]:hover {\n      border-color: #20a0ff;\n}\n.add-oper .my-form .userpic .avatar-uploader-icon[data-v-69d000e4] {\n      font-size: 28px;\n      color: #8c939d;\n      width: 178px;\n      height: 178px;\n      line-height: 178px;\n      text-align: center;\n}\n.add-oper .my-form .userpic .avatar[data-v-69d000e4] {\n      width: 178px;\n      height: 178px;\n      display: block;\n}\n.add-oper .account .table[data-v-69d000e4] {\n  width: 78.5%;\n  margin: 0 auto;\n}\n.add-oper .download[data-v-69d000e4] {\n  width: 100%;\n  color: black;\n  cursor: pointer;\n}\n.add-oper .ml[data-v-69d000e4] {\n  margin-left: -10px;\n}\n",""])},"8I40":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("lC5x"),o=a.n(r),n=a("J0Oq"),i=a.n(n),s={name:"eArea",props:["curNum","ifEdit","data","check"],data:function(){return{areaData:{provinceId:"",provinceName:"",cityId:"",cityName:"",zoneId:"",zoneName:"",streetId:"",streetName:"",community:"",detailedAddress:""},provinces:[],cities:[],areas:[],streets:[],ruls:[]}},created:function(){this.getProvinces(),this.data&&this.ifEdit&&(this.areaData.provinceId=parseInt(this.data.provinceId),this.areaData.provinceName=this.data.provinceName,this.areaData.cityId=parseInt(this.data.cityId),this.areaData.cityName=this.data.cityName,this.areaData.zoneId=parseInt(this.data.zoneId),this.areaData.zoneName=this.data.zoneName,this.areaData.streetId=parseInt(this.data.streetId),this.areaData.streetName=this.data.streetName,this.areaData.community=this.data.community,this.areaData.detailedAddress=this.data.detailedAddress)},mounted:function(){},methods:{getProvinces:function(){var e=this;return i()(o.a.mark(function t(){var a,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get("http://ums.17link.cc/city/getAllProvince.do",{withCredentials:!0});case 3:a=t.sent,r=a.data.data.list,e.provinces=r,e.ifEdit&&e.data&&(e.areaData.provinceId=parseInt(e.data.provinceId)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}},t,e,[[0,9]])}))()},getCities:function(){var e=this;return i()(o.a.mark(function t(){var a,r,n,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("http://ums.17link.cc/city/getCityByPid.do?pid="+e.areaData.provinceId,{withCredentials:!0});case 2:a=t.sent,r=a.data.data.list,n=e,(i=e.provinces.filter(function(e){return e.id==n.areaData.provinceId})).length>0&&i[0].name&&(e.areaData.provinceName=i[0].name),e.cities=r,e.ifEdit&&(e.areaData.cityId=parseInt(e.data.cityId)),e.selectChange();case 10:case"end":return t.stop()}},t,e)}))()},getAreas:function(){var e=this;return i()(o.a.mark(function t(){var a,r,n,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get("http://ums.17link.cc/city/getCityByPid.do?pid="+e.areaData.cityId,{withCredentials:!0});case 3:a=t.sent,r=a.data.data.list,e.areas=r,n=e,(i=e.cities.filter(function(e){return e.id==n.areaData.cityId})).length>0&&i[0].name&&(e.areaData.cityName=i[0].name),e.ifEdit&&(e.areaData.zoneId=parseInt(e.data.zoneId)),e.selectChange(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}},t,e,[[0,13]])}))()},getStreets:function(){var e=this;return i()(o.a.mark(function t(){var a,r,n,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get("http://ums.17link.cc/city/getCityByPid.do?pid="+e.areaData.zoneId,{withCredentials:!0});case 3:a=t.sent,r=a.data.data.list,e.streets=r,n=e,(i=e.areas.filter(function(e){return e.id==n.areaData.zoneId})).length>0&&i[0].name&&(e.areaData.zoneName=i[0].name),e.ifEdit&&(e.areaData.streetId=parseInt(e.data.streetId)),e.selectChange(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}},t,e,[[0,13]])}))()},selectChange:function(){var e=this;if(this.areaData.streetId){var t=this.streets.filter(function(t){return t.id===e.areaData.streetId});t.length&&t.length>0&&t[0].name&&(this.areaData.streetName=t[0].name)}this.$emit("select-change",this.areaData,this.curNum)},reSet:function(){this.areaData={provinceId:"",provinceName:"",cityId:"",cityName:"",zoneId:"",zoneName:"",streetId:"",streetName:""}}},watch:{data:function(){this.getProvinces(),this.ifEdit&&(this.areaData.provinceId=parseInt(this.data.provinceId),this.areaData.provinceName=this.data.provinceName,this.areaData.cityId=parseInt(this.data.cityId),this.areaData.cityName=this.data.cityName,this.areaData.zoneId=parseInt(this.data.zoneId),this.areaData.zoneName=this.data.zoneName,this.areaData.streetId=parseInt(this.data.streetId),this.areaData.streetName=this.data.streetName,this.areaData.community=this.data.community,this.areaData.detailedAddress=this.data.detailedAddress)},"areaData.provinceId":function(){this.ifEdit||(this.areaData.cityId="",this.areaData.zoneId="",this.areaData.streetId="",this.cities=[],this.areas=[],this.streets=[]);try{if(!this.areaData.provinceId)return!1;this.getCities()}catch(e){console.log(e)}},"areaData.cityId":function(){if(this.ifEdit||(this.areaData.zoneId="",this.areaData.streetId="",this.areas=[],this.streets=[]),!this.areaData.cityId)return!1;this.getAreas()},"areaData.zoneId":function(){if(this.ifEdit||(this.areaData.streetId="",this.streets=[]),!this.areaData.zoneId)return!1;this.getStreets()},"areaData.community":function(){this.selectChange()},"areaData.detailedAddress":function(){this.selectChange()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{class:{must:this.check},attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{disabled:e.ifEdit,placeholder:"请选择"},model:{value:e.areaData.provinceId,callback:function(t){e.$set(e.areaData,"provinceId",t)},expression:"areaData.provinceId"}},[a("el-option",{attrs:{label:"无",value:""}}),e._v(" "),e._l(e.provinces,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{disabled:e.ifEdit,placeholder:"请选择","label-width":"0"},model:{value:e.areaData.cityId,callback:function(t){e.$set(e.areaData,"cityId",t)},expression:"areaData.cityId"}},[a("el-option",{attrs:{label:"无",value:""}}),e._v(" "),e._l(e.cities,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{disabled:e.ifEdit,placeholder:"请选择","label-width":"0"},model:{value:e.areaData.zoneId,callback:function(t){e.$set(e.areaData,"zoneId",t)},expression:"areaData.zoneId"}},[a("el-option",{attrs:{label:"无",value:""}}),e._v(" "),e._l(e.areas,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{disabled:e.ifEdit,placeholder:"请选择","label-width":"0"},on:{change:e.selectChange},model:{value:e.areaData.streetId,callback:function(t){e.$set(e.areaData,"streetId",t)},expression:"areaData.streetId"}},[a("el-option",{attrs:{label:"无",value:""}}),e._v(" "),e._l(e.streets,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{disabled:e.ifEdit,placeholder:"请输入所在社区"},model:{value:e.areaData.community,callback:function(t){e.$set(e.areaData,"community",t)},expression:"areaData.community"}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-input",{attrs:{disabled:e.ifEdit,placeholder:"请输入详细地址"},model:{value:e.areaData.detailedAddress,callback:function(t){e.$set(e.areaData,"detailedAddress",t)},expression:"areaData.detailedAddress"}})],1)],1)},staticRenderFns:[]};var c=a("/Xao")(s,l,!1,function(e){a("gASX")},null,null);t.default=c.exports},SDIC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("lC5x"),o=a.n(r),n=a("J0Oq"),i=a.n(n),s={name:"popup",props:["userId"],data:function(){var e,t=this;return{rules:{type:[{required:!0,type:"number",message:"请选择操作类型",trigger:"blur"}],amount:[{required:!0,message:"请输入金额，金额需大于零，只包含两位小数",trigger:"blur"},{validator:(e=i()(o.a.mark(function e(a,r,n){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r>0?n():n(new Error("请输入大于零的数字"));case 1:case"end":return e.stop()}},e,t)})),function(t,a,r){return e.apply(this,arguments)}),trigger:"blur"}],remark:[{required:!0,message:"请输入充值原因",trigger:"blur"}]},ele:{bankLabel:"充值金额",reasonLabel:"充值原因",opt:"+",des:"金额必须是大于0的数字，小数点最多两位"},data:{userId:this.userId,createrId:window._dataInfo.id,createrName:window._dataInfo.name,amount:"",remark:"",type:1,start:"",end:""},formLabelWidth:"120px",position:"left",time:[]}},methods:{cliConfirm:function(){var e=this;this.$refs.form.validate(function(t){t&&(e.time.length>1&&(e.data.start=new Date(e.time[0]).getTime(),e.data.end=new Date(e.time[1]).getTime()),e.$emit("pop-click",e.data))})},cliCancle:function(){this.$emit("pop-click")}},watch:{"data.type":function(){1===this.data.type?this.ele={bankLabel:"充值金额",reasonLabel:"充值原因",opt:"+",des:"金额必须是大于0的数字，小数点最多两位"}:this.ele={bankLabel:"减少金额",reasonLabel:"减少原因",opt:"-",des:"金额必须是大于0的数字，小数点最多两位"}}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"popUp"},[a("el-dialog",{staticClass:"dialog",attrs:{title:"充值",visible:!0,"show-close":!1,"lock-scroll":!0,"close-on-click-modal":!1,modal:!0}},[a("el-form",{ref:"form",attrs:{model:e.data,rules:e.rules,"label-position":e.position}},[a("el-row",[a("el-form-item",{attrs:{label:"操作类型",prop:"type"}},[a("el-radio-group",{model:{value:e.data.type,callback:function(t){e.$set(e.data,"type",e._n(t))},expression:"data.type"}},[a("el-radio",{attrs:{label:1}},[e._v("增加金额")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("减少金额")])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.ele.bankLabel,"label-width":e.formLabelWidth,prop:"amount"}},[a("el-input",{attrs:{type:"text"},model:{value:e.data.amount,callback:function(t){e.$set(e.data,"amount",t)},expression:"data.amount"}})],1),e._v(" "),a("span",[e._v(e._s(e.ele.des))])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.ele.reasonLabel,"label-width":e.formLabelWidth,prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.data.remark,callback:function(t){e.$set(e.data,"remark",t)},expression:"data.remark"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"补助时间（开始-结束）","label-width":e.formLabelWidth}},[a("el-date-picker",{attrs:{type:"datetimerange",placeholder:"选择时间范围"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:e.cliConfirm}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.cliCancle}},[e._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var c=a("/Xao")(s,l,!1,function(e){a("jVCj")},null,null);t.default=c.exports},Yz1A:function(e,t,a){var r=a("zmXH");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("8bSs")("6a7c7fb6",r,!0)},gASX:function(e,t,a){var r=a("/bmf");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("8bSs")("29c23959",r,!0)},"i2/x":function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.popUp .dialog {\n  /*position: absolute;*/\n  /*top: 300px;*/\n  /*left: 30%;*/\n}\n",""])},il66:function(e,t,a){"use strict";function r(e){return{required:!0,message:"请输入"+e}}function o(e){return[r(e),{pattern:/^\d{11}$/,message:"请输入有效的"+e,trigger:"change"}]}a.d(t,"b",function(){return r}),a.d(t,"a",function(){return o})},jVCj:function(e,t,a){var r=a("i2/x");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("8bSs")("6db3195a",r,!0)},zmXH:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.must .el-form-item__label::before {\n  content: '*';\n  color: #ff4949;\n  margin-right: 4px;\n  margin-left: 10px;\n}\n",""])}});