webpackJsonp([48],{rsdO:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("lC5x"),s=t.n(a),n=t("J0Oq"),o=t.n(n),i=t("rppN"),u={data:function(){var e,r=this,t=(e=o()(s.a.mark(function e(t,a,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/^1[1-9]\d{9}$/.test(a)){e.next=12;break}return e.prev=1,e.next=4,r.$agent.get("http://ums.17link.cc/user/getUserByUserName.do?username="+r.userForm.username);case 4:n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),setTimeout(function(){n(new Error(e.t0.message))},3e3);case 10:e.next=13;break;case 12:n(new Error("请输入有效的手机号码"));case 13:case"end":return e.stop()}},e,r,[[1,7]])})),function(r,t,a){return e.apply(this,arguments)});return{userForm:{name:"",username:"",type:window._dataInfo.type,orgName:window._dataInfo.orgName,orgId:window._dataInfo.orgId,addUserId:window._dataInfo.id,addUserName:window._dataInfo.name},ifShow:!0,rules:{name:[{required:!0,message:"用户姓名不能为空"}],desc:[{required:!0,message:""}],username:[{type:"number",required:!0,message:"请输入电话号码",trigger:"blur"},{validator:t,trigger:"blur"}],provinceId:{required:!0,message:"请选择行政区划"}}}},created:function(){console.log("addsub")},components:{limitArea:t("J6Ty").default,PageContainer:i.a},methods:{selectChange:function(e){this.userForm.provinceId=e.provinceId,this.userForm.provinceName=e.provinceName,this.userForm.cityId=e.cityId,this.userForm.cityName=e.cityName,this.userForm.countryId=e.areaId,this.userForm.countryName=e.areaName,this.userForm.streetId=e.streetId,this.userForm.streetName=e.streetName},save:function(e){var r,t=this;console.log(e),this.$refs.form.validate((r=o()(s.a.mark(function r(a){return s.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:a&&t.$http.post("http://ums.17link.cc/user/saveUser.do",t.userForm).then(function(r){if(0===r.data.errCode){var a=r.data.data.id;e?t.$refs.form.resetFields():t.$router.push({path:"/gov/GovernmentInfo",query:{id:a}})}else alert(r.data.errMessage)});case 1:case"end":return r.stop()}},r,t)})),function(e){return r.apply(this,arguments)}))}}},m={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("page-container",{attrs:{title:"添加政府账号","show-back-btn":""}},[t("el-form",{ref:"form",staticClass:"info-container",attrs:{model:e.userForm,"label-position":"left","label-width":"100px",rules:e.rules}},[t("el-form-item",{attrs:{label:"行政区域",prop:"provinceId"}},[t("limitArea",{on:{"select-change":e.selectChange}})],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"姓名",prop:"name"}},[t("el-input",{model:{value:e.userForm.name,callback:function(r){e.$set(e.userForm,"name",r)},expression:"userForm.name"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"手机号",prop:"username"}},[t("el-input",{model:{value:e.userForm.username,callback:function(r){e.$set(e.userForm,"username",e._n(r))},expression:"userForm.username"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-form-item",{attrs:{label:" "}},[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.save(!1)}}},[e._v("保存")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.save(!0)}}},[e._v("保存下一条")])],1)],1)],1)],1)},staticRenderFns:[]},l=t("/Xao")(u,m,!1,null,null,null);r.default=l.exports}});