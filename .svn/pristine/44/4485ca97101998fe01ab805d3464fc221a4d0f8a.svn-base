webpackJsonp([37],{"5Rjt":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("lC5x"),a=t.n(s),o=t("J0Oq"),l=t.n(o),n=t("rppN"),i={data:function(){var e,r=this,t=(e=l()(a.a.mark(function e(t,s,o){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s>0?o():o(new Error("请输入大于零的数字"));case 1:case"end":return e.stop()}},e,r)})),function(r,t,s){return e.apply(this,arguments)});return{userForm:{name:"",address:"",type:"",picUrl:"",ranges:"",capital:"",represent:"",phone:"",workerCount:"",business:"",regDepartment:"",regTime:"",contacts:"",post:"",contactsPhone:"",basicCondition:"",level:0,serviceAreas:[]},fileData:{type:""},addressNum:1,curNum:0,addressList:[],rules:{name:[{required:!0,message:"机构名称不能够为空",trigger:"blur"}],type:[{required:!0,message:"机构性质不能够为空",trigger:"blur"}],address:[{required:!0,message:"机构地址不能够为空",trigger:"blur"}],ranges:[{required:!0,message:"经营范围不能够为空",trigger:"blur"}],capital:[{type:"number",required:!0,message:"注册资金不能够为空且为数字",trigger:"blur"},{validator:t,trigger:"blur"}],represent:[{required:!0,message:"法人代表不能够为空",trigger:"blur"}],phone:[{required:!0,message:"联系电话不能够为空",trigger:"blur"}],workerCount:[{type:"number",required:!0,message:"职工总数不能够为空且为数字",trigger:"blur"},{validator:t,trigger:"blur"}],business:[{required:!0,message:"业务范围不能够为空",trigger:"blur"}],regDepartment:[{required:!0,message:"注册登记部门不能够为空",trigger:"blur"}],regTime:[{type:"date",required:!0,message:"注册时间不能够为空",trigger:"blur"}],contacts:[{required:!0,message:"机构联系人不能够为空",trigger:"blur"}],post:[{required:!0,message:"职务不能够为空",trigger:"blur"}],contactsPhone:[{required:!0,message:"联系电话不能够为空",trigger:"blur"}],basicCondition:[{required:!0,message:"企业基本状况不能够为空",trigger:"blur"}],level:[{required:!0,message:"机构等级不能够为空",trigger:"blur"}],fileList:[{required:!0,message:"经营许可证不能够为空",trigger:"blur"}],serviceAreas:[{required:!0,message:"服务区域不能为空",trigger:"blur"}]}}},components:{cityArea:t("qn+5").a,PageContainer:n.a},methods:{selectChange:function(e,r){var t=r-1;t<0&&(t=0),this.addressList[t]=e},save:function(){var e=this,r=this;this.$refs.userForm.validate(function(t){if(t){r.userForm.serviceAreas=[];for(var s=0;s<r.addressList.length;s++)r.addressList[s]&&r.userForm.serviceAreas.push(r.addressList[s]);r.$http.post("http://ums.17link.cc/org/addOrg.do",r.userForm).then(function(r){e.$router.push({path:"/pt/AddOrgAccount",query:{id:r.data.data.orgId}})}).catch(function(e){return console.log})}})},next:function(){var e=this;this.$refs.userForm.validate(function(r){if(r){e.userForm.serviceAreas=[];for(var t=0;t<e.addressList.length;t++)e.addressList[t]&&e.userForm.serviceAreas.push(e.addressList[t]);e.$http.post("http://ums.17link.cc/org/addOrg.do",e.userForm).then(function(r){e.$router.go(0)}).catch(function(e){return console.log})}})},addArea:function(){this.addressNum+=1,this.addressList.length=this.addressNum},cutArea:function(){this.addressNum-=1,this.addressNum<0&&(this.addressNum=0),this.addressList.length=this.addressNum},handleAvatarSuccess:function(e){arguments[2].length>1&&arguments[2].shift(),this.userForm.picUrl=e.data.url},beforeAvatarUpload:function(e){var r=e.size/1024/1024<10;return r||this.$message.error("上传头像图片大小不能超过 10MB!"),r}}},u={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("page-container",{attrs:{title:"添加机构","show-back-btn":""}},[t("el-form",{ref:"userForm",staticClass:"info-container",attrs:{model:e.userForm,"label-position":"left","label-width":"110px",rules:e.rules,inline:""}},[t("el-row",[e._l(e.addressNum,function(r){return[t("cityArea",{ref:"area",refInFor:!0,attrs:{prop:"serviceAreas",title:"服务区域",curNum:r,check:!0},on:{"select-change":e.selectChange}})]}),e._v(" "),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addArea}},[e._v("＋")]),e._v(" "),e.addressNum>1?t("el-button",{attrs:{type:"plain",size:"small"},on:{click:e.cutArea}},[e._v("－")]):e._e()],2),e._v(" "),t("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[t("el-input",{model:{value:e.userForm.name,callback:function(r){e.$set(e.userForm,"name",r)},expression:"userForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"机构性质",prop:"type"}},[t("el-input",{model:{value:e.userForm.type,callback:function(r){e.$set(e.userForm,"type",r)},expression:"userForm.type"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"机构地址",prop:"address"}},[t("el-input",{model:{value:e.userForm.address,callback:function(r){e.$set(e.userForm,"address",r)},expression:"userForm.address"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"经营范围",prop:"ranges"}},[t("el-input",{model:{value:e.userForm.ranges,callback:function(r){e.$set(e.userForm,"ranges",r)},expression:"userForm.ranges"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"注册资金",prop:"capital"}},[t("el-input",{model:{value:e.userForm.capital,callback:function(r){e.$set(e.userForm,"capital",e._n(r))},expression:"userForm.capital"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"法人代表",prop:"represent"}},[t("el-input",{model:{value:e.userForm.represent,callback:function(r){e.$set(e.userForm,"represent",r)},expression:"userForm.represent"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[t("el-input",{model:{value:e.userForm.phone,callback:function(r){e.$set(e.userForm,"phone",r)},expression:"userForm.phone"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"职工总数",prop:"workerCount"}},[t("el-input",{model:{value:e.userForm.workerCount,callback:function(r){e.$set(e.userForm,"workerCount",e._n(r))},expression:"userForm.workerCount"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"业务范围",prop:"business"}},[t("el-input",{model:{value:e.userForm.business,callback:function(r){e.$set(e.userForm,"business",r)},expression:"userForm.business"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"注册登记部门",prop:"regDepartment"}},[t("el-input",{model:{value:e.userForm.regDepartment,callback:function(r){e.$set(e.userForm,"regDepartment",r)},expression:"userForm.regDepartment"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"注册登记时间",prop:"regTime"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.userForm.regTime,callback:function(r){e.$set(e.userForm,"regTime",r)},expression:"userForm.regTime"}})],1),e._v(" "),t("el-form-item",{staticClass:"must",attrs:{label:"机构联系人"}},[t("el-form-item",{attrs:{prop:"contacts"}},[t("el-input",{attrs:{placeholder:"姓名"},model:{value:e.userForm.contacts,callback:function(r){e.$set(e.userForm,"contacts",r)},expression:"userForm.contacts"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"post"}},[t("el-input",{attrs:{placeholder:"职务"},model:{value:e.userForm.post,callback:function(r){e.$set(e.userForm,"post",r)},expression:"userForm.post"}})],1),e._v(" "),t("el-form-item",{attrs:{prop:"contactsPhone"}},[t("el-input",{attrs:{placeholder:"联系电话"},model:{value:e.userForm.contactsPhone,callback:function(r){e.$set(e.userForm,"contactsPhone",r)},expression:"userForm.contactsPhone"}})],1)],1),e._v(" "),t("el-row",{staticClass:"must"},[t("el-form-item",{attrs:{label:"经营许可证",prop:"pic_url"}},[t("el-upload",{attrs:{action:"http://upload.17link.cc/upload.do","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,multiple:!1}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("文件不超过10M")])],1)],1)],1),e._v(" "),t("el-row",[t("el-form-item",{attrs:{label:"企业基本状况",prop:"basicCondition"}},[t("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:6},resize:"none",placeholder:"请填写企业基本概况"},model:{value:e.userForm.basicCondition,callback:function(r){e.$set(e.userForm,"basicCondition",r)},expression:"userForm.basicCondition"}})],1)],1),e._v(" "),t("el-row",[t("el-form-item",{staticClass:"must",attrs:{label:"机构等级"}},[t("el-rate",{model:{value:e.userForm.level,callback:function(r){e.$set(e.userForm,"level",r)},expression:"userForm.level"}})],1)],1),e._v(" "),t("el-row",[t("el-form-item",{attrs:{label:" "}},[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.save("form")}}},[e._v("保存")]),e._v(" "),t("el-button",{attrs:{type:"plain"},on:{click:e.next}},[e._v("保存下一条")])],1)],1)],1)],1)},staticRenderFns:[]};var c=t("/Xao")(i,u,!1,function(e){t("whdK")},null,null);r.default=c.exports},NYDY:function(e,r,t){(e.exports=t("BkJT")(!1)).push([e.i,"\n.must .el-form-item__label::before {\n  content: '*';\n  color: #ff4949;\n  margin-right: 4px;\n  margin-left: 10px;\n}\n.info-container ul.el-upload-list li {\n  height: 24px;\n}\n",""])},whdK:function(e,r,t){var s=t("NYDY");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t("8bSs")("31f9b1ac",s,!0)}});