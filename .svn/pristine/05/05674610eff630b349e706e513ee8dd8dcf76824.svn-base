webpackJsonp([25],{QWtY:function(e,r,t){(e.exports=t("BkJT")(!1)).push([e.i,"\n.info-container .head {\n  background-color: #fff;\n}\n.info-container .head h5 {\n    padding: 0px 38px 0px 38px;\n    height: 42px;\n    line-height: 42px;\n    font-size: 22px;\n    color: #616d80;\n    border: 1px solid #CAD3DF;\n    border-bottom: none;\n    text-align: center;\n    background-color: #FBFBFB;\n    border-radius: 5px 5px 0 0;\n}\n.info-container .head div {\n    width: calc(100% - 150px);\n    height: 42px;\n    background-color: #fff;\n    border-bottom: 1px solid #CAD3DF;\n}\n.info-container .my-form {\n  background-color: #FBFBFB;\n  padding-bottom: 50px;\n  border: 1px solid #CAD3DF;\n  border-top: none;\n  padding-left: 31px;\n}\n.info-container .my-form h4 {\n    font-size: 22px;\n    color: #616d80;\n}\n.info-container .my-form .button {\n    margin: 10px 0;\n}\n.info-container .my-form .area {\n    position: relative;\n}\n.info-container .my-form .area .area-button {\n      position: absolute;\n      top: 0px;\n      right: 0;\n      width: 15%;\n}\n.info-container .my-form .stars {\n    padding-top: 8px;\n}\n.info-container .my-form .m-l {\n    margin-left: 20px;\n}\n.info-container .my-form .download {\n    width: 100%;\n    cursor: pointer;\n}\n.info-container ul.el-upload-list li {\n  height: 24px;\n}\n",""])},rQYr:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t("rppN"),a=t("STY9"),o={data:function(){return{userForm:{name:"",address:"",type:"",picUrl:"",ranges:"",capital:"",represent:"",phone:"",workerCount:"",business:"",regDepartment:"",regTime:"",contacts:"",post:"",contactsPhone:"",basicCondition:"",level:0,serviceAreas:[]},addressNum:0,curNum:0,addressList:[],fileList:[],rules:{name:[{required:!0,message:"机构名称不能够为空",trigger:"blur"}],type:[{required:!0,message:"机构性质不能够为空",trigger:"blur"}],address:[{required:!0,message:"机构地址不能够为空",trigger:"blur"}],ranges:[{required:!0,message:"经营范围不能够为空",trigger:"blur"}],capital:[{type:"number",required:!0,message:"注册资金不能够为空且为数字",trigger:"blur"}],represent:[{required:!0,message:"法人代表不能够为空",trigger:"blur"}],phone:[{type:"number",length:11,required:!0,message:"联系电话不能够为空",trigger:"blur"}],workerCount:[{type:"number",required:!0,message:"职工总数不能够为空且为数字",trigger:"blur"}],business:[{required:!0,message:"业务范围不能够为空",trigger:"blur"}],regDepartment:[{required:!0,message:"注册登记部门不能够为空",trigger:"blur"}],regTime:[{type:"date",required:!0,message:"注册时间不能够为空",trigger:"blur"}],contacts:[{required:!0,message:"机构联系人不能够为空",trigger:"blur"}],post:[{required:!0,message:"职务不能够为空",trigger:"blur"}],contactsPhone:[{required:!0,message:"联系电话不能够为空",trigger:"blur"}],basicCondition:[{required:!0,message:"企业基本状况不能够为空",trigger:"blur"}],level:[{required:!0,message:"机构等级不能够为空",trigger:"blur"}],picUrl:[{required:!0,message:"经营许可证不能够为空",trigger:"blur"}]},ifEdit:!0,areas:[],id:""}},components:{cityArea:t("qn+5").a,PageContainer:s.a,ChunkLabel:a.a},created:function(){this.id=this.$route.query.id,this.getInfo(this.id)},methods:{selectChange:function(e,r){var t=r-1;t<0&&(t=0),this.addressList[t]=e},checkData:function(){var e=this.userForm;return""!==e.name.trim()&&""!==e.address.trim()&&""!==e.type.trim()&&""!==e.ranges.trim()&&""!==e.capital&&""!==e.phone&&""!==e.workerCount&&""!==e.business.trim()&&""!==e.regDepartment.trim()&&""!==e.regTime&&""!==e.contacts.trim()&&""!==e.post.trim()&&""!==e.contactsPhone&&""!==e.basicCondition.trim()&&""!==e.level||(alert("请按照规则填写数据"),!1)},save:function(){var e=this;if(this.addressList.length>0){for(var r=[],t=0;t<this.addressList.length;t++)this.addressList[t]&&r.push(this.addressList[t]);this.userForm.serviceAreas=r}if(!this.checkData())return!1;this.$http.post("/org/updateOrg.do",this.userForm).then(function(r){alert("修改成功"),e.$router.push({path:"/pt/orgMana"})}).catch(function(e){return console.log})},addArea:function(){this.addressNum+=1,this.addressList.length=this.addressNum},cutArea:function(){this.addressNum-=1,this.addressNum<0&&(this.addressNum=0),this.addressList.length=this.addressNum},editInfo:function(){this.ifEdit=!1,0===this.addressNum&&(this.addressNum=1)},getInfo:function(e){var r=this;this.$http.get("/org/getOrgById.do?id="+e).then(function(e){var t=e.data.data;r.userForm=t.org,r.addressNum=t.org.serviceAreas.length,r.addressList=t.org.serviceAreas}).catch(function(e){return console.log})},handleAvatarSuccess:function(e){arguments[2].length>1&&arguments[2].shift(),this.userForm.picUrl=e.data.url,this.userForm.picUrl=e.data.url},beforeAvatarUpload:function(e){var r=e.size/1024/1024<10;return r||this.$message.error("上传头像图片大小不能超过 10MB!"),r}},watch:{}},i={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("page-container",{attrs:{title:"机构信息","show-back-btn":""}},[t("chunk-label",{attrs:{title:"基本信息"}},[t("el-button",{staticClass:"button",attrs:{type:"plain",icon:"el-icon-edit",size:"small"},on:{click:e.editInfo}},[e._v("编辑")])],1),e._v(" "),t("el-form",{ref:"form",staticClass:"info-container",attrs:{model:e.userForm,"label-position":"left","label-width":"110px",rules:e.rules}},[t("el-row",{staticClass:"area"},[e._l(e.addressNum,function(r){return[t("cityArea",{ref:"area",refInFor:!0,attrs:{ifEdit:e.ifEdit,title:"服务区域",serviceArea:e.userForm.serviceAreas[r-1],prop:"desc",curNum:r,check:"true"},on:{"select-change":e.selectChange}})]}),e._v(" "),e.ifEdit?e._e():t("div",{staticClass:"area-button"},[t("el-button",{attrs:{type:"primary"},on:{click:e.addArea}},[e._v("＋")]),e._v(" "),e.addressNum>1?t("el-button",{attrs:{type:"primary"},on:{click:e.cutArea}},[e._v("－")]):e._e()],1)],2),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[t("el-input",{attrs:{disabled:e.ifEdit},model:{value:e.userForm.name,callback:function(r){e.$set(e.userForm,"name",r)},expression:"userForm.name"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"机构性质",prop:"type"}},[t("el-input",{attrs:{disabled:e.ifEdit},model:{value:e.userForm.type,callback:function(r){e.$set(e.userForm,"type",r)},expression:"userForm.type"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"机构地址",prop:"address"}},[t("el-input",{attrs:{disabled:e.ifEdit},model:{value:e.userForm.address,callback:function(r){e.$set(e.userForm,"address",r)},expression:"userForm.address"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"经营许可证",prop:"picUrl"}},[e.ifEdit?e.userForm.picUrl?t("a",{staticClass:"download",attrs:{download:"test",href:e.userForm.picUrl}},[e._v("\n                        下载查看文件\n                    ")]):t("span",{staticClass:"download"},[e._v("未上传经营许可证")]):t("el-upload",{attrs:{action:"http://upload.17link.cc/upload.do","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload,multiple:!1,data:{file:"经营许可证"}}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("文件不超过10M")])],1)],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"经营范围",prop:"ranges"}},[t("el-input",{attrs:{disabled:e.ifEdit},model:{value:e.userForm.ranges,callback:function(r){e.$set(e.userForm,"ranges",r)},expression:"userForm.ranges"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"注册资金",prop:"capital"}},[t("el-input",{attrs:{disabled:e.ifEdit},model:{value:e.userForm.capital,callback:function(r){e.$set(e.userForm,"capital",e._n(r))},expression:"userForm.capital"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"法人代表",prop:"represent"}},[t("el-input",{attrs:{disabled:e.ifEdit},model:{value:e.userForm.represent,callback:function(r){e.$set(e.userForm,"represent",r)},expression:"userForm.represent"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[t("el-input",{attrs:{disabled:e.ifEdit},model:{value:e.userForm.phone,callback:function(r){e.$set(e.userForm,"phone",r)},expression:"userForm.phone"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"职工总数",prop:"workerCount"}},[t("el-input",{attrs:{disabled:e.ifEdit},model:{value:e.userForm.workerCount,callback:function(r){e.$set(e.userForm,"workerCount",e._n(r))},expression:"userForm.workerCount"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"业务范围",prop:"business"}},[t("el-input",{attrs:{disabled:e.ifEdit},model:{value:e.userForm.business,callback:function(r){e.$set(e.userForm,"business",r)},expression:"userForm.business"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"注册登记部门",prop:"regDepartment"}},[t("el-input",{attrs:{disabled:e.ifEdit},model:{value:e.userForm.regDepartment,callback:function(r){e.$set(e.userForm,"regDepartment",r)},expression:"userForm.regDepartment"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"注册登记时间",prop:"regTime"}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",disabled:e.ifEdit},model:{value:e.userForm.regTime,callback:function(r){e.$set(e.userForm,"regTime",r)},expression:"userForm.regTime"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"机构联系人",prop:"contacts"}},[t("el-input",{attrs:{disabled:e.ifEdit},model:{value:e.userForm.contacts,callback:function(r){e.$set(e.userForm,"contacts",r)},expression:"userForm.contacts"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:6}},[t("el-form-item",{staticClass:"m-l",attrs:{label:"职务",prop:"post","label-width":"70px"}},[t("el-input",{attrs:{disabled:e.ifEdit},model:{value:e.userForm.post,callback:function(r){e.$set(e.userForm,"post",r)},expression:"userForm.post"}})],1)],1),e._v(" "),t("el-col",{attrs:{span:6}},[t("el-form-item",{staticClass:"m-l",attrs:{label:"联系电话",prop:"contactsPhone","label-width":"80px"}},[t("el-input",{attrs:{disabled:e.ifEdit},model:{value:e.userForm.contactsPhone,callback:function(r){e.$set(e.userForm,"contactsPhone",r)},expression:"userForm.contactsPhone"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"企业基本状况",prop:"basicCondition"}},[t("el-input",{attrs:{type:"textarea",disabled:e.ifEdit},model:{value:e.userForm.basicCondition,callback:function(r){e.$set(e.userForm,"basicCondition",r)},expression:"userForm.basicCondition"}})],1)],1)],1),e._v(" "),t("el-row",[t("el-col",{attrs:{span:6}},[t("el-form-item",{attrs:{label:"机构等级",prop:"level"}},[t("el-rate",{staticClass:"stars",attrs:{disabled:e.ifEdit},model:{value:e.userForm.level,callback:function(r){e.$set(e.userForm,"level",r)},expression:"userForm.level"}})],1)],1)],1)],1),e._v(" "),e.ifEdit?e._e():t("el-row",[t("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var n=t("/Xao")(o,i,!1,function(e){t("rxOy")},null,null);r.default=n.exports},rxOy:function(e,r,t){var s=t("QWtY");"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);t("8bSs")("48b5b32e",s,!0)}});