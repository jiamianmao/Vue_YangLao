webpackJsonp([29],{H15n:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("hRKE"),n=a.n(r),o=a("lC5x"),i=a.n(o),s=a("J0Oq"),l=a.n(s),c=a("4YfN"),u=a.n(c),m=a("rppN"),p=a("qn+5"),d=a("fEa0"),v=a("M8s3"),f=a("7XyB"),b=a("9rMa"),g={data:function(){return{orgName:"",userForm:{pageNum:1,pageSize:10,condition:{createDateFrom:"",createDateTo:"",mobile:"",orgId:"",sex:"",state:"",workerName:"",serviceArea:{provinceId:"",provinceName:"",cityId:"",cityName:"",zoneId:"",zoneName:"",streetId:"",streetName:""}}},tableData:[],showOrg:!1,time:[],totleNum:0,pending:!1}},components:{cityArea:p.a,limitArea:d.a,orgChoose:v.a,PageContainer:m.a},computed:u()({},Object(b.d)(["userInfo"]),Object(b.b)(["isPf","isGover","isOrg","post"])),created:function(){var e=this;this.getLists(),this.$http.get("http://mp.17link.cc/worker/postDict").then(function(t){e.SET_POST(t.data.data.list)})},methods:u()({sift:function(){this.userForm.pageSize=10,this.getLists()},changeStatus:function(e){var t=this;return l()(i.a.mark(function a(){var r,n,o;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=e.id,n=e.state,o=n%2+1,a.prev=2,a.next=5,t.$http.post("http://mp.17link.cc/worker/update",{worker:{id:r,state:o}});case 5:e.state=o,a.next=11;break;case 8:a.prev=8,a.t0=a.catch(2),console.log(a.t0);case 11:case"end":return a.stop()}},a,t,[[2,8]])}))()},getAdverseStatus:function(e){return e&&e.trim?"正常"===e.trim()?"停用":"启用":"停用"},selectChange:function(e){var t=this.userForm.condition.serviceArea;t.provinceId=e.provinceId,t.provinceName=e.provinceName,t.cityId=e.cityId,t.cityName=e.cityName,t.zoneId=e.zoneId,t.zoneName=e.zoneName,t.streetId=e.streetId,t.streetName=e.streetName},chooseOrg:function(){this.showOrg=!0},setOrgInfo:function(e){e&&(this.userForm.condition.orgId=e.id,this.orgName=e.name),this.showOrg=!1},pageChange:function(e){this.userForm.pageNum=e,this.userForm.pageSize=10,this.getLists()},reSet:function(){this.userForm.condition.orgId="",this.orgName="",this.$refs.area&&this.$refs.area.reSet(),this.time=[],this.userForm.condition={createDateFrom:"",createDateTo:"",mobile:"",orgId:"",sex:"",state:"",workerName:"",serviceArea:{provinceId:"",provinceName:"",cityId:"",cityName:"",zoneId:"",zoneName:"",streetId:"",streetName:""}}},trans4display:function(e,t){var a=t.property,r=e[a];if(a.endsWith("Time"))return Object(f.format)(r,"YYYY-MM-DD HH:mm:SS");switch(a){case"state":r=["正常","失效"][r-1];break;case"sex":r=["男","女"][r-1];break;case"post":var n=this.post.find(function(e){return e.id===r});r=n?n.text:null;break;default:r="/"}return r||"异常数据"},getLists:function(){var e=this;return l()(i.a.mark(function t(){var a,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.userForm.condition.createDateFrom="",e.userForm.condition.createDateTo="",e.time.length>0&&e.time[0]&&e.time[1]&&(e.userForm.condition.createDateFrom=e.time[0].getTime(),e.userForm.condition.createDateTo=e.time[1].getTime()),e.pending=!0,t.next=7,e.$http.post("http://mp.17link.cc/worker/loadWorkers",e.userForm);case 7:a=t.sent,r=a.data.data,e.totleNum=r.count,e.tableData=r.list,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:e.pending=!1;case 17:case"end":return t.stop()}},t,e,[[0,13]])}))()},linkTo:function(e,t){var a=e.id,r=t?"/integratedMana/worker/"+a+"/isEdit":"/integratedMana/worker/"+a;this.$router.push(r)},add:function(){this.$router.push({name:"WorkerAdd",params:{id:0}})},getQuery:function(e){var t="";for(var a in e)"object"===n()(e[a])?t+=this.getQuery(e[a]):t+=a+"="+e[a]+"&";return t},getParams:function(e){return e.slice(0,-1)}},Object(b.c)(["SET_POST"]))},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-container",{attrs:{title:"服务人员列表"}},[a("div",{staticClass:"info-container"},[a("el-form",{attrs:{model:e.userForm,inline:"","label-width":"100px","label-position":"left"}},[a("el-row",{staticClass:"area"},[e.isPf?a("cityArea",{ref:"area",attrs:{title:"服务区域",curNum:"0"},on:{"select-change":e.selectChange}}):e._e(),e._v(" "),e.isGover?a("limitArea",{ref:"area",on:{"select-change":e.selectChange}}):e._e()],1),e._v(" "),e.isOrg?e._e():a("el-row",[a("el-form-item",{attrs:{label:"服务机构"}},[e._v("\n                    "+e._s(e.orgName)+"\n                    "),a("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:e.chooseOrg}},[e._v("选择服务机构")])],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"服务人员姓名"}},[a("el-input",{model:{value:e.userForm.condition.workerName,callback:function(t){e.$set(e.userForm.condition,"workerName",t)},expression:"userForm.condition.workerName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话"}},[a("el-input",{model:{value:e.userForm.condition.mobile,callback:function(t){e.$set(e.userForm.condition,"mobile",t)},expression:"userForm.condition.mobile"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"性别"}},[a("el-select",{attrs:{placeholder:"请选择机构状态"},model:{value:e.userForm.condition.sex,callback:function(t){e.$set(e.userForm.condition,"sex",t)},expression:"userForm.condition.sex"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"女",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"服务人员状态"}},[a("el-select",{attrs:{placeholder:"请选择机构状态"},model:{value:e.userForm.condition.state,callback:function(t){e.$set(e.userForm.condition,"state",t)},expression:"userForm.condition.state"}},[a("el-option",{attrs:{label:"全部",value:""}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"失效",value:"2"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"创建时间"}},[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"选择时间范围"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)],1),e._v(" "),a("el-row",[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.sift}},[e._v("筛选")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.reSet}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[a("a",{staticClass:"download",attrs:{download:"test",href:"http://mp.17link.cc/worker/export?"+e.getParams(e.getQuery(this.userForm))}},[e._v("导出")])]),e._v(" "),e.isOrg?a("el-button",{staticClass:"button",attrs:{icon:"plus",type:"primary"},on:{click:e.add}},[e._v("添加服务人员\n                    ")]):e._e()],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"list"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.pending,expression:"pending"}],staticClass:"list",attrs:{data:e.tableData,stripe:"",border:"","element-loading-text":"正在请求数据..."}},[a("el-table-column",{attrs:{prop:"control",label:"服务人员姓名",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.linkTo(e.tableData[t.$index])}}},[e._v("\n                        "+e._s(e.tableData[t.$index].name)+"\n                    ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"orgName",label:"所属机构",width:"120",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"provinceName",label:"省",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cityName",label:"市",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"districtName",label:"区县",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"streetName",label:"街道",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mobile",label:"联系电话",align:"center",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别",formatter:e.trans4display,align:"center",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"post",label:"职位",align:"center",formatter:e.trans4display,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center",formatter:e.trans4display,width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"state",label:"服务人员状态",align:"center",formatter:e.trans4display,width:"100"}}),e._v(" "),e.isGover?e._e():a("el-table-column",{attrs:{prop:"control",label:"操作",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.changeStatus(e.tableData[t.$index])}}},[e._v("\n                        "+e._s(2===e.tableData[t.$index].state?"启用":"停用")+"\n                    ")]),e._v(" "),1===e.tableData[t.$index].state?a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.linkTo(e.tableData[t.$index],!0)}}},[e._v("\n                        修改\n                    ")]):e._e()]}}])})],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"center"}},[a("el-pagination",{attrs:{"page-size":10,layout:"total, prev, pager, next",total:e.totleNum},on:{"current-change":e.pageChange}})],1)],1),e._v(" "),e.showOrg?a("org-choose",{attrs:{areaData:e.userForm.condition.serviceArea},on:{"pop-click":e.setOrgInfo}}):e._e()],1)},staticRenderFns:[]};var _=a("/Xao")(g,h,!1,function(e){a("JQuZ")},null,null);t.default=_.exports},JQuZ:function(e,t,a){var r=a("K4ce");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("8bSs")("5df08bec",r,!0)},K4ce:function(e,t,a){(e.exports=a("BkJT")(!1)).push([e.i,"\n.add {\n  margin-left: 50px;\n}\n.download {\n  width: 100%;\n  color: #fff;\n}\n",""])}});