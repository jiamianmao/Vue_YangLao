webpackJsonp([46],{rdDQ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("lC5x"),a=r.n(i),s=r("J0Oq"),n=r.n(s),o=r("rppN"),l=r("qn+5"),u=r("rvSH");var d={methods:{dispatch(e,t,r){for(var i=this.$parent||this.$root,a=i.$options.componentName;i&&(!a||a!==e);)(i=i.$parent)&&(a=i.$options.componentName);i&&i.$emit.apply(i,[t].concat(r))},broadcast(e,t,r){(function e(t,r,i){this.$children.forEach(a=>{a.$options.componentName===t?a.$emit.apply(a,[r].concat(i)):e.apply(a,[t,r].concat([i]))})}).call(this,e,t,r)}}};Object.prototype.hasOwnProperty;function c(){}function m(e,t,r){let i=e,a=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),s=0;for(let e=a.length;s<e-1&&(i||r);++s){let e=a[s];if(!(e in i)){if(r)throw new Error("please transfer a valid prop path to form item!");break}i=i[e]}return{o:i,k:a[s],v:i?i[a[s]]:null}}var f={name:"ElFormItem",componentName:"ElFormItem",mixins:[d],provide:function(){return{elFormItem:this}},inject:["elForm"],props:{label:String,labelWidth:String,prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:String},watch:{error:function(e){this.validateMessage=e,this.validateState=e?"error":""},validateStatus:function(e){this.validateState=e}},computed:{labelFor:function(){return this.for||this.prop},labelStyle:function(){var e={};if("top"===this.form.labelPosition)return e;var t=this.labelWidth||this.form.labelWidth;return t&&(e.width=t),e},contentStyle:function(){var e={},t=this.label;if("top"===this.form.labelPosition||this.form.inline)return e;if(!t&&!this.labelWidth&&this.isNested)return e;var r=this.labelWidth||this.form.labelWidth;return r&&(e.marginLeft=r),e},form:function(){for(var e=this.$parent,t=e.$options.componentName;"ElForm"!==t;)"ElFormItem"===t&&(this.isNested=!0),t=(e=e.$parent).$options.componentName;return e},fieldValue:{cache:!1,get:function(){var e=this.form.model;if(e&&this.prop){var t=this.prop;return-1!==t.indexOf(":")&&(t=t.replace(/:/,".")),m(e,t,!0).v}}},isRequired:function(){var e=this.getRules(),t=!1;return e&&e.length&&e.every(function(e){return!e.required||(t=!0,!1)}),t},_formSize:function(){return this.elForm.size},elFormItemSize:function(){return this.size||this._formSize},sizeClass:function(){return(this.$ELEMENT||{}).size||this.elFormItemSize}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1}},methods:{validate:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c;this.validateDisabled=!1;var i=this.getFilteredRule(e);if((!i||0===i.length)&&void 0===this.required)return r(),!0;this.validateState="validating";var a={};i&&i.length>0&&i.forEach(function(e){delete e.trigger}),a[this.prop]=i;var s=new u.default(a),n={};n[this.prop]=this.fieldValue,s.validate(n,{firstFields:!0},function(e,i){t.validateState=e?"error":"success",t.validateMessage=e?e[0].message:"",r(t.validateMessage)})},clearValidate:function(){this.validateState="",this.validateMessage="",this.validateDisabled=!1},resetField:function(){this.validateState="",this.validateMessage="";var e=this.form.model,t=this.fieldValue,r=this.prop;-1!==r.indexOf(":")&&(r=r.replace(/:/,"."));var i=m(e,r,!0);Array.isArray(t)?(this.validateDisabled=!0,i.o[i.k]=[].concat(this.initialValue)):(this.validateDisabled=!0,i.o[i.k]=this.initialValue)},getRules:function(){var e=this.form.rules,t=this.rules,r=void 0!==this.required?{required:!!this.required}:[];return e=e?m(e,this.prop||"").v:[],[].concat(t||e||[]).concat(r)},getFilteredRule:function(e){return this.getRules().filter(function(t){return!t.trigger||-1!==t.trigger.indexOf(e)}).map(function(e){return function(e){for(let t=1,r=arguments.length;t<r;t++){let r=arguments[t]||{};for(let t in r)if(r.hasOwnProperty(t)){let i=r[t];void 0!==i&&(e[t]=i)}}return e}({},e)})},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var e=this.fieldValue;Array.isArray(e)&&(e=[].concat(e)),Object.defineProperty(this,"initialValue",{value:e}),(this.getRules().length||void 0!==this.required)&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"el-form-item",class:[{"el-form-item--feedback":e.elForm&&e.elForm.statusIcon,"is-error":"error"===e.validateState,"is-validating":"validating"===e.validateState,"is-success":"success"===e.validateState,"is-required":e.isRequired||e.required},e.sizeClass?"el-form-item--"+e.sizeClass:""]},[e.label||e.$slots.label?r("label",{staticClass:"el-form-item__label",style:e.labelStyle,attrs:{for:e.labelFor}},[e._t("label",[e._v(e._s(e.label+e.form.labelSuffix))])],2):e._e(),e._v(" "),r("div",{staticClass:"el-form-item__content",style:e.contentStyle},[e._t("default"),e._v(" "),r("transition",{attrs:{name:"el-zoom-in-top"}},["error"===e.validateState&&e.showMessage&&e.form.showMessage?r("div",{staticClass:"el-form-item__error",class:{"el-form-item__error--inline":"boolean"==typeof e.inlineMessage?e.inlineMessage:e.elForm&&e.elForm.inlineMessage||!1}},[e._v("\n        "+e._s(e.validateMessage)+"\n      ")]):e._e()])],2)])},staticRenderFns:[]},p={data:function(){var e,t=this,r=(e=n()(a.a.mark(function e(r,i,s){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!/^1[1-9]\d{9}$/.test(i)){e.next=12;break}return e.prev=1,e.next=4,t.$http.get("http://ums.17link.cc/user/getUserByUserName.do?username="+t.userForm.username);case 4:s(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),setTimeout(function(){s(new Error(e.t0.message))},3e3);case 10:e.next=13;break;case 12:s(new Error("请输入有效的手机号码"));case 13:case"end":return e.stop()}},e,t,[[1,7]])})),function(t,r,i){return e.apply(this,arguments)});return{userForm:{name:"",username:"",type:window._dataInfo.type,orgName:window._dataInfo.orgName,orgId:window._dataInfo.orgId,addUserId:window._dataInfo.id,addUserName:window._dataInfo.name},ifShow:!0,rules:{name:[{required:!0,message:"用户姓名不能为空"}],username:[{type:"number",required:!0,message:"请输入电话号码",trigger:"blur"},{validator:r,trigger:"blur"}],provinceId:{required:!0,message:"请选择行政区划"}}}},components:{ElFormItem:r("/Xao")(f,h,!1,null,null,null).exports,cityArea:l.a,PageContainer:o.a},methods:{selectChange:function(e){this.userForm.provinceId=e.provinceId,this.userForm.provinceName=e.provinceName,this.userForm.cityId=e.cityId,this.userForm.cityName=e.cityName,this.userForm.countryId=e.areaId,this.userForm.countryName=e.areaName,this.userForm.streetId=e.streetId,this.userForm.streetName=e.streetName},save:function(e){var t,r=this;this.$refs.userForm.validate((t=n()(a.a.mark(function t(i){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i&&r.$http.post("http://ums.17link.cc/user/saveUser.do",r.userForm).then(function(t){var i=t.data;if(0===i.errCode){var a=i.data.id;e?r.$refs.userForm.resetFields():r.$router.push({path:"/pt/GovernmentInfo",query:{id:a}})}else alert(i.errMessage)});case 1:case"end":return t.stop()}},t,r)})),function(e){return t.apply(this,arguments)}))}}},v={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("page-container",{attrs:{title:"添加政府账号","show-back-btn":""}},[r("el-form",{ref:"userForm",staticClass:"info-container",attrs:{model:e.userForm,"label-position":"left","label-width":"100px",rules:e.rules}},[r("el-form-item",{attrs:{label:"行政区域",prop:"provinceId"}},[e.ifShow?r("cityArea",{ref:"area",attrs:{prop:"desc"},on:{"select-change":e.selectChange}}):e._e()],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{model:{value:e.userForm.name,callback:function(t){e.$set(e.userForm,"name",t)},expression:"userForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号",prop:"username"}},[r("el-input",{model:{value:e.userForm.username,callback:function(t){e.$set(e.userForm,"username",e._n(t))},expression:"userForm.username"}})],1)],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.save(!1)}}},[e._v("保存")]),e._v(" "),r("el-button",{attrs:{type:"plain"},on:{click:function(t){e.save(!0)}}},[e._v("保存下一条")])],1)],1)],1)},staticRenderFns:[]},g=r("/Xao")(p,v,!1,null,null,null);t.default=g.exports}});